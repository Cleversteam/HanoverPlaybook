<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ruby/Rails Style Guide</title>
  <meta name="description" content="The Ruby/Rails Style Guide">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="/guides/ruby_rails_style_guide.html">
  <link rel="alternate" type="application/rss+xml" title="Cleversteam Playbook" href="/feed.xml">
  <link rel="stylesheet" href="https://use.typekit.net/qgi7htv.css">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 306.5 65.34"><defs><style>.cls-1{font-size:63.5px;fill:#fff;font-family:BebasNeueBook, Bebas Neue;letter-spacing:0.05em;}.cls-2{font-family:BebasNeueBold, Bebas Neue;font-weight:700;}</style></defs><title>Asset 1</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><text class="cls-1" transform="translate(0 53.97)">Clever<tspan class="cls-2" x="160.71" y="0">STEAM</tspan></text></g></g></svg>  
    </a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Ruby/Rails Style Guide</h1>
  </header>

  <div class="post-content">
    <h1 id="the-rubyrails-style-guide">The Ruby/Rails Style Guide</h1>

<p>Adapted from <a href="https://github.com/styleguide/ruby">Github’s guide</a> and <a href="https://github.com/bbatsov/rails-style-guide">Bozhidar Batsov’s guide</a>.</p>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#ruby">Ruby</a>
    <ul>
      <li><a href="#source-code-layout">Source Code Layout</a></li>
      <li><a href="#syntax">Syntax</a></li>
      <li><a href="#naming">Naming</a></li>
      <li><a href="#classes--modules">Classes &amp; Modules</a></li>
      <li><a href="#exceptions">Exceptions</a></li>
      <li><a href="#collections">Collections</a></li>
      <li><a href="#numbers">Numbers</a></li>
      <li><a href="#strings">Strings</a></li>
      <li><a href="#date--time">Date &amp; Time</a></li>
      <li><a href="#regular-expressions">Regular Expressions</a></li>
      <li><a href="#percent-literals">Percent Literals</a></li>
      <li><a href="#metaprogramming">Metaprogramming</a></li>
    </ul>
  </li>
  <li><a href="#rails">Rails</a>
    <ul>
      <li><a href="#routing">Routing</a></li>
      <li><a href="#controllers">Controllers</a></li>
      <li><a href="#models">Models</a>
        <ul>
          <li><a href="#activerecord">ActiveRecord</a></li>
          <li><a href="#activerecord-queries">ActiveRecord Queries</a></li>
        </ul>
      </li>
      <li><a href="#migrations">Migrations</a></li>
      <li><a href="#views">Views</a></li>
      <li><a href="#assets">Assets</a></li>
      <li><a href="#mailers">Mailers</a></li>
      <li><a href="#time">Time</a></li>
      <li><a href="#bundler">Bundler</a></li>
      <li><a href="#managing-processes">Managing processes</a></li>
    </ul>
  </li>
</ul>

<h2 id="ruby">Ruby</h2>

<h3 id="source-code-layout">Source Code Layout</h3>

<ul>
  <li>
    <p><a name="utf-8"></a>
Use <code class="highlighter-rouge">UTF-8</code> as the source file encoding.
<sup>[<a href="#utf-8">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="spaces-indentation"></a>
Use two <strong>spaces</strong> per indentation level (aka soft tabs). No hard tabs.
<sup>[<a href="#spaces-indentation">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - four spaces
def some_method
    do_something
end

# good
def some_method
  do_something
end
</code></pre>
  </li>
  <li>
    <p><a name="crlf"></a>
Use Unix-style line endings. (*BSD/Solaris/Linux/OS X users are covered by
default, Windows users have to be extra careful.)
<sup>[<a href="#crlf">link</a>]</sup></p>

    <ul>
      <li>
        <p>If you’re using Git you might want to add the following
configuration setting to protect your project from Windows line
endings creeping in:</p>

        <div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git config --global core.autocrlf <span class="nb">true</span>
</code></pre>
        </div>
      </li>
    </ul>
  </li>
  <li>
    <p><a name="no-semicolon"></a>
Don’t use <code class="highlighter-rouge">;</code> to separate statements and expressions. As a corollary—use
one expression per line.
<sup>[<a href="#no-semicolon">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
puts 'foobar'; # superfluous semicolon

puts 'foo'; puts 'bar' # two expressions on the same line

# good
puts 'foobar'

puts 'foo'
puts 'bar'

puts 'foo', 'bar' # this applies to puts in particular
</code></pre>
  </li>
  <li>
    <p><a name="single-line-classes"></a>
Prefer a single-line format for class definitions with no body.
<sup>[<a href="#single-line-classes">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
class FooError &lt; StandardError
end

# okish
class FooError &lt; StandardError; end

# good
FooError = Class.new(StandardError)
</code></pre>
  </li>
  <li>
    <p><a name="no-single-line-methods"></a>
Avoid single-line methods. Just do.
<sup>[<a href="#no-single-line-methods">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
def too_much; something; something_else; end

# good
def some_method
  body
end
</code></pre>
  </li>
  <li>
    <p><a name="spaces-operators"></a>
Use spaces around operators, after commas, colons and semicolons.
Whitespace might be (mostly) irrelevant to the Ruby interpreter,
but its proper use is the key to writing easily readable code.
<sup>[<a href="#spaces-operators">link</a>]</sup></p>

    <pre><code class="language-Ruby">sum = 1 + 2
a, b = 1, 2
class FooError &lt; StandardError; end
</code></pre>

    <p>The only exception, regarding operators, is the exponent operator:</p>

    <pre><code class="language-Ruby"># bad
e = M * c ** 2

# good
e = M * c**2
</code></pre>
  </li>
  <li>
    <p><a name="spaces-braces"></a>
No spaces after <code class="highlighter-rouge">(</code>, <code class="highlighter-rouge">[</code> or before <code class="highlighter-rouge">]</code>, <code class="highlighter-rouge">)</code>.
Use spaces around <code class="highlighter-rouge"><span class="p">{</span></code> and before <code class="highlighter-rouge">}</code> (except in blocks).
<sup>[<a href="#spaces-braces">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
some( arg ).other
[ 1, 2, 3 ].each{|e| puts e}

# good
some(arg).other
[1, 2, 3].each { |e| puts e }
</code></pre>

    <p><code class="highlighter-rouge"><span class="p">{</span></code> and <code class="highlighter-rouge">}</code> should use no spaces when declaring hash literals…</p>

    <pre><code class="language-Ruby"># good - no space after { and before }
{one: 1, two: 2}
</code></pre>

    <p>… but use spaces when declaring a block expression for visual difference</p>

    <pre><code class="language-Ruby"># good - space after { and before }
{ |x| do_something(x) }

</code></pre>

    <p>With interpolated expressions, there should be no padded-spacing inside the braces.</p>

    <pre><code class="language-Ruby"># bad
"From: #{ user.first_name }, #{ user.last_name }"

# good
"From: #{user.first_name}, #{user.last_name}"
</code></pre>
  </li>
  <li>
    <p><a name="no-space-bang"></a>
No space after <code class="highlighter-rouge">!</code>.
<sup>[<a href="#no-space-bang">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
! something

# good
!something
</code></pre>
  </li>
  <li>
    <p><a name="no-space-inside-range-literals"></a>
No space inside range literals.
<sup>[<a href="#no-space-inside-range-literals">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
1 .. 3
'a' ... 'z'

# good
1..3
'a'...'z'
</code></pre>
  </li>
  <li>
    <p><a name="indent-when-to-case"></a>
Indent <code class="highlighter-rouge">when</code> as deep as <code class="highlighter-rouge">case</code>. This is the style established in both
“The Ruby Programming Language” and “Programming Ruby”.
<sup>[<a href="#indent-when-to-case">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
case
  when song.name == 'Misty'
    puts 'Not again!'
  when song.duration &gt; 120
    puts 'Too long!'
  when Time.now.hour &gt; 21
    puts "It's too late"
  else
    song.play
end

# good
case
when song.name == 'Misty'
  puts 'Not again!'
when song.duration &gt; 120
  puts 'Too long!'
when Time.now.hour &gt; 21
  puts "It's too late"
else
  song.play
end
</code></pre>
  </li>
  <li>
    <p><a name="indent-conditional-assignment"></a>
When assigning the result of a conditional expression to a variable,
preserve the usual alignment of its branches.
<sup>[<a href="#indent-conditional-assignment">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - pretty convoluted
kind = case year
when 1850..1889 then 'Blues'
when 1890..1909 then 'Ragtime'
when 1910..1929 then 'New Orleans Jazz'
when 1930..1939 then 'Swing'
when 1940..1950 then 'Bebop'
else 'Jazz'
end

result = if some_cond
  calc_something
else
  calc_something_else
end

# good - it's apparent what's going on
kind = case year
       when 1850..1889 then 'Blues'
       when 1890..1909 then 'Ragtime'
       when 1910..1929 then 'New Orleans Jazz'
       when 1930..1939 then 'Swing'
       when 1940..1950 then 'Bebop'
       else 'Jazz'
       end

result = if some_cond
           calc_something
         else
           calc_something_else
         end

# good (and a bit more width efficient)
kind =
  case year
  when 1850..1889 then 'Blues'
  when 1890..1909 then 'Ragtime'
  when 1910..1929 then 'New Orleans Jazz'
  when 1930..1939 then 'Swing'
  when 1940..1950 then 'Bebop'
  else 'Jazz'
  end

result =
  if some_cond
    calc_something
  else
    calc_something_else
  end
</code></pre>
  </li>
  <li>
    <p><a name="empty-lines-between-methods"></a>
Use empty lines between method definitions and also to break up methods
into logical paragraphs internally.
<sup>[<a href="#empty-lines-between-methods">link</a>]</sup></p>

    <pre><code class="language-Ruby">def some_method
  data = initialize(options)

  data.manipulate!

  data.result
end

def some_method
  result
end
</code></pre>
  </li>
  <li>
    <p><a name="no-trailing-params-comma"></a>
Avoid comma after the last parameter in a method call, especially when the
parameters are not on separate lines.
<sup>[<a href="#no-trailing-params-comma">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - easier to move/add/remove parameters, but still not preferred
some_method(
             size,
             count,
             color,
           )

# still bad
some_method(size, count, color, )

# good
some_method(size, count, color)
</code></pre>
  </li>
  <li>
    <p><a name="spaces-around-equals"></a>
Use spaces around the <code class="highlighter-rouge">=</code> operator when assigning default values to method
parameters:
<sup>[<a href="#spaces-around-equals">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
def some_method(arg1=:default, arg2=nil, arg3=[])
  # do something...
end

# good
def some_method(arg1 = :default, arg2 = nil, arg3 = [])
  # do something...
end
</code></pre>

    <p>While several Ruby books suggest the first style, the second is much more
prominent in practice (and arguably a bit more readable).</p>
  </li>
  <li>
    <p><a name="no-trailing-backslash"></a>
Avoid line continuation <code class="highlighter-rouge">\</code> where not required. In practice, avoid using
line continuations for anything but string concatenation.
<sup>[<a href="#no-trailing-backslash">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
result = 1 - \
         2

# good (but still ugly as hell)
result = 1 \
         - 2

long_string = 'First part of the long string' \
              ' and second part of the long string'
</code></pre>
  </li>
  <li>
    <p><a name="consistent-multi-line-chains"></a>
  Adopt a consistent multi-line method chaining style. There are two popular
  styles in the Ruby community, both of which are considered
  good—leading <code class="highlighter-rouge">.</code> (Option A) and trailing <code class="highlighter-rouge">.</code> (Option B).
<sup>[<a href="#consistent-multi-line-chains">link</a>]</sup></p>

    <ul>
      <li>
        <p><strong>(Option A)</strong> When continuing a chained method invocation on
another line keep the <code class="highlighter-rouge">.</code> on the second line.</p>

        <pre><code class="language-Ruby"># bad - need to consult first line to understand second line
one.two.three.
  four

# good - it's immediately clear what's going on the second line
one.two.three
  .four
</code></pre>
      </li>
      <li>
        <p><strong>(Option B)</strong> When continuing a chained method invocation on another line,
include the <code class="highlighter-rouge">.</code> on the first line to indicate that the
expression continues.</p>

        <pre><code class="language-Ruby"># bad - need to read ahead to the second line to know that the chain continues
one.two.three
  .four

# good - it's immediately clear that the expression continues beyond the first line
one.two.three.
  four
</code></pre>
      </li>
    </ul>
  </li>
  <li>
    <p><a name="no-double-indent"></a>
  Align the parameters of a method call if they span more than one
  line. When aligning parameters is not appropriate due to line-length
  constraints, single indent for the lines after the first is also
  acceptable.
<sup>[<a href="#no-double-indent">link</a>]</sup></p>

    <pre><code class="language-Ruby"># starting point (line is too long)
def send_mail(source)
  Mailer.deliver(to: 'bob@example.com', from: 'us@example.com', subject: 'Important message', body: source.text)
end

# bad (double indent)
def send_mail(source)
  Mailer.deliver(
      to: 'bob@example.com',
      from: 'us@example.com',
      subject: 'Important message',
      body: source.text)
end

# good
def send_mail(source)
  Mailer.deliver(to: 'bob@example.com',
                 from: 'us@example.com',
                 subject: 'Important message',
                 body: source.text)
end

# good (normal indent)
def send_mail(source)
  Mailer.deliver(
    to: 'bob@example.com',
    from: 'us@example.com',
    subject: 'Important message',
    body: source.text
  )
end
</code></pre>
  </li>
  <li>
    <p><a name="align-multiline-arrays"></a>
Align the elements of array literals spanning multiple lines.
<sup>[<a href="#align-multiline-arrays">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - single indent
menu_item = ['Spam', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam',
  'Baked beans', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam']

# good
menu_item = [
  'Spam', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam',
  'Baked beans', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam'
]

# good
menu_item =
  ['Spam', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam',
   'Baked beans', 'Spam', 'Spam', 'Spam', 'Spam', 'Spam']
</code></pre>
  </li>
  <li>
    <p><a name="underscores-in-numerics"></a>
Add underscores to large numeric literals to improve their readability.
<sup>[<a href="#underscores-in-numerics">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - how many 0s are there?
num = 1000000

# good - much easier to parse for the human brain
num = 1_000_000
</code></pre>
  </li>
  <li>
    <p><a name="80-character-limits"></a>
Limit lines to 80 characters.
<sup>[<a href="#80-character-limits">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="no-trailing-whitespace"></a>
Avoid trailing whitespace.
<sup>[<a href="#no-trailing-whitespace">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="newline-eof"></a>
End each file with a newline.
<sup>[<a href="#newline-eof">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="no-block-comments"></a>
  Don’t use block comments. They cannot be preceded by whitespace and are not
  as easy to spot as regular comments.
<sup>[<a href="#no-block-comments">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
=begin
comment line
another comment line
=end

# good
# comment line
# another comment line
</code></pre>
  </li>
</ul>

<h3 id="syntax">Syntax</h3>

<ul>
  <li>
    <p><a name="double-colons"></a>
  Use <code class="highlighter-rouge">::</code> only to reference constants(this includes classes and
  modules) and constructors (like <code class="highlighter-rouge">Array()</code> or <code class="highlighter-rouge">Nokogiri::HTML()</code>).
  Do not use <code class="highlighter-rouge">::</code> for regular method invocation.
<sup>[<a href="#double-colons">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
SomeClass::some_method
some_object::some_method

# good
SomeClass.some_method
some_object.some_method
SomeModule::SomeClass::SOME_CONST
SomeModule::SomeClass()
</code></pre>
  </li>
  <li>
    <p><a name="method-parens"></a>
  Use <code class="highlighter-rouge">def</code> with parentheses when there are parameters. Omit the
  parentheses when the method doesn’t accept any parameters.
<sup>[<a href="#method-parens">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
def some_method()
  # body omitted
end

# good
def some_method
  # body omitted
end

# bad
def some_method_with_parameters param1, param2
  # body omitted
end

# good
def some_method_with_parameters(param1, param2)
  # body omitted
end
</code></pre>
  </li>
  <li>
    <p><a name="optional-arguments"></a>
  Define optional arguments at the end of the list of arguments.
  Ruby has some unexpected results when calling methods that have
  optional arguments at the front of the list.
<sup>[<a href="#optional-arguments">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
def some_method(a = 1, b = 2, c, d)
  puts "#{a}, #{b}, #{c}, #{d}"
end

some_method('w', 'x') # =&gt; '1, 2, w, x'
some_method('w', 'x', 'y') # =&gt; 'w, 2, x, y'
some_method('w', 'x', 'y', 'z') # =&gt; 'w, x, y, z'

# good
def some_method(c, d, a = 1, b = 2)
  puts "#{a}, #{b}, #{c}, #{d}"
end

some_method('w', 'x') # =&gt; '1, 2, w, x'
some_method('w', 'x', 'y') # =&gt; 'y, 2, w, x'
some_method('w', 'x', 'y', 'z') # =&gt; 'y, z, w, x'
</code></pre>
  </li>
  <li>
    <p><a name="parallel-assignment"></a>
  Avoid the use of parallel assignment for defining variables. Parallel
  assignment is allowed when it is the return of a method call, used with
  the splat operator, or when used to swap variable assignment. Parallel
  assignment is less readable than separate assignment.
<sup>[<a href="#parallel-assignment">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
a, b, c, d = 'foo', 'bar', 'baz', 'foobar'

# good
a = 'foo'
b = 'bar'
c = 'baz'
d = 'foobar'

# good - swapping variable assignment
# Swapping variable assignment is a special case because it will allow you to
# swap the values that are assigned to each variable.
a = 'foo'
b = 'bar'

a, b = b, a
puts a # =&gt; 'bar'
puts b # =&gt; 'foo'

# good - method return
def multi_return
  [1, 2]
end

first, second = multi_return

# good - use with splat
first, *list = [1, 2, 3, 4] # first =&gt; 1, list =&gt; [2, 3, 4]

hello_array = *'Hello' # =&gt; ["Hello"]

a = *(1..3) # =&gt; [1, 2, 3]
</code></pre>
  </li>
  <li>
    <p><a name="no-for-loops"></a>
  Do not use <code class="highlighter-rouge">for</code>, unless you know exactly why. Most of the time iterators
  should be used instead. <code class="highlighter-rouge">for</code> is implemented in terms of <code class="highlighter-rouge">each</code> (so you’re
  adding a level of indirection), but with a twist—<code class="highlighter-rouge">for</code> doesn’t
  introduce a new scope (unlike <code class="highlighter-rouge">each</code>) and variables defined in its block
  will be visible outside it.
<sup>[<a href="#no-for-loops">link</a>]</sup></p>

    <pre><code class="language-Ruby">arr = [1, 2, 3]

# bad
for elem in arr do
  puts elem
end

# note that elem is accessible outside of the for loop
elem # =&gt; 3

# good
arr.each { |elem| puts elem }

# elem is not accessible outside each's block
elem # =&gt; NameError: undefined local variable or method `elem'
</code></pre>
  </li>
  <li>
    <p><a name="no-then"></a>
Do not use <code class="highlighter-rouge">then</code> for multi-line <code class="highlighter-rouge">if</code>/<code class="highlighter-rouge">unless</code>.
<sup>[<a href="#no-then">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
if some_condition then
  # body omitted
end

# good
if some_condition
  # body omitted
end
</code></pre>
  </li>
  <li>
    <p><a name="same-line-condition"></a>
Always put the condition on the same line as the <code class="highlighter-rouge">if</code>/<code class="highlighter-rouge">unless</code> in a
multi-line conditional.
<sup>[<a href="#same-line-condition">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
if
  some_condition
  do_something
  do_something_else
end

# good
if some_condition
  do_something
  do_something_else
end
</code></pre>
  </li>
  <li>
    <p><a name="ternary-operator"></a>
Favor the ternary operator(<code class="highlighter-rouge">?:</code>) over <code class="highlighter-rouge">if/then/else/end</code> constructs.
It’s more common and obviously more concise.
<sup>[<a href="#ternary-operator">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
result = if some_condition then something else something_else end

# good
result = some_condition ? something : something_else
</code></pre>
  </li>
  <li>
    <p><a name="no-nested-ternary"></a>
Use one expression per branch in a ternary operator. This
also means that ternary operators must not be nested. Prefer
<code class="highlighter-rouge">if/else</code> constructs in these cases.
<sup>[<a href="#no-nested-ternary">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
some_condition ? (nested_condition ? nested_something : nested_something_else) : something_else

# good
if some_condition
  nested_condition ? nested_something : nested_something_else
else
  something_else
end
</code></pre>
  </li>
  <li>
    <p><a name="no-semicolon-ifs"></a>
Do not use <code class="highlighter-rouge">if x; ...</code>. Use the ternary
operator instead.
<sup>[<a href="#no-semicolon-ifs">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
result = if some_condition; something else something_else end

# good
result = some_condition ? something : something_else
</code></pre>
  </li>
  <li>
    <p><a name="use-if-case-returns"></a>
Leverage the fact that <code class="highlighter-rouge">if</code> and <code class="highlighter-rouge">case</code> are expressions which return a
result.
<sup>[<a href="#use-if-case-returns">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
if condition
  result = x
else
  result = y
end

# good
result =
  if condition
    x
  else
    y
  end
</code></pre>
  </li>
  <li>
    <p><a name="one-line-cases"></a>
Use <code class="highlighter-rouge">when x then ...</code> for one-line cases. The alternative syntax <code class="highlighter-rouge">when x:
...</code> has been removed as of Ruby 1.9.
<sup>[<a href="#one-line-cases">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="no-when-semicolons"></a>
Do not use <code class="highlighter-rouge">when x; ...</code>. See the previous rule.
<sup>[<a href="#no-when-semicolons">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="bang-not-not"></a>
Use <code class="highlighter-rouge">!</code> instead of <code class="highlighter-rouge">not</code>.
<sup>[<a href="#bang-not-not">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - parentheses are required because of op precedence
x = (not something)

# good
x = !something
</code></pre>
  </li>
  <li>
    <p><a name="no-bang-bang"></a>
Avoid the use of <code class="highlighter-rouge">!!</code>.
<sup>[<a href="#no-bang-bang">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
x = 'test'
# obscure nil check
if !!x
  # body omitted
end

x = false
# double negation is useless on booleans
!!x # =&gt; false

# good
x = 'test'
unless x.nil?
  # body omitted
end
</code></pre>
  </li>
  <li>
    <p><a name="no-and-or-or"></a>
The <code class="highlighter-rouge">and</code> and <code class="highlighter-rouge">or</code> keywords are banned. It’s just not worth it. Always use
<code class="highlighter-rouge">&amp;&amp;</code> and <code class="highlighter-rouge">||</code> instead.
<sup>[<a href="#no-and-or-or">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
# boolean expression
if some_condition and some_other_condition
  do_something
end

# control flow
document.saved? or document.save!

# good
# boolean expression
if some_condition &amp;&amp; some_other_condition
  do_something
end

# control flow
document.saved? || document.save!
</code></pre>
  </li>
  <li>
    <p><a name="no-multiline-ternary"></a>
Avoid multi-line <code class="highlighter-rouge">?:</code> (the ternary operator); use <code class="highlighter-rouge">if</code>/<code class="highlighter-rouge">unless</code> instead.
<sup>[<a href="#no-multiline-ternary">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="if-as-a-modifier"></a>
Favor modifier <code class="highlighter-rouge">if</code>/<code class="highlighter-rouge">unless</code> usage when you have a single-line body. Another
good alternative is the usage of control flow <code class="highlighter-rouge">&amp;&amp;</code>/<code class="highlighter-rouge">||</code>.
<sup>[<a href="#if-as-a-modifier">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
if some_condition
  do_something
end

# good
do_something if some_condition

# another good option
some_condition &amp;&amp; do_something
</code></pre>
  </li>
  <li>
    <p><a name="no-multiline-if-modifiers"></a>
Avoid modifier <code class="highlighter-rouge">if</code>/<code class="highlighter-rouge">unless</code> usage at the end of a non-trivial multi-line
block.
<sup>[<a href="#no-multiline-if-modifiers">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
10.times do
  # multi-line body omitted
end if some_condition

# good
if some_condition
  10.times do
    # multi-line body omitted
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="no-nested-modifiers"></a>
Avoid nested modifier <code class="highlighter-rouge">if</code>/<code class="highlighter-rouge">unless</code>/<code class="highlighter-rouge">while</code>/<code class="highlighter-rouge">until</code> usage. Favor <code class="highlighter-rouge">&amp;&amp;</code>/<code class="highlighter-rouge">||</code> if
appropriate.
<sup>[<a href="#no-nested-modifiers">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
do_something if other_condition if some_condition

# good
do_something if some_condition &amp;&amp; other_condition
</code></pre>
  </li>
  <li>
    <p><a name="unless-for-negatives"></a>
Favor <code class="highlighter-rouge">unless</code> over <code class="highlighter-rouge">if</code> for negative conditions (or control flow <code class="highlighter-rouge">||</code>).
<sup>[<a href="#unless-for-negatives">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
do_something if !some_condition

# bad
do_something if not some_condition

# good
do_something unless some_condition

# another good option
some_condition || do_something
</code></pre>
  </li>
  <li>
    <p><a name="no-else-with-unless"></a>
Do not use <code class="highlighter-rouge">unless</code> with <code class="highlighter-rouge">else</code>. Rewrite these with the positive case first.
<sup>[<a href="#no-else-with-unless">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
unless success?
  puts 'failure'
else
  puts 'success'
end

# good
if success?
  puts 'success'
else
  puts 'failure'
end
</code></pre>
  </li>
  <li>
    <p><a name="no-parens-if"></a>
Don’t use parentheses around the condition of an
<code class="highlighter-rouge">if</code>/<code class="highlighter-rouge">unless</code>/<code class="highlighter-rouge">while</code>/<code class="highlighter-rouge">until</code>.
<sup>[<a href="#no-parens-if">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
if (x &gt; 10)
  # body omitted
end

# good
if x &gt; 10
  # body omitted
end
</code></pre>
  </li>
  <li>
    <p><a name="no-multiline-while-do"></a>
Do not use <code class="highlighter-rouge">while/until condition do</code> for multi-line <code class="highlighter-rouge">while/until</code>.
<sup>[<a href="#no-multiline-while-do">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
while x &gt; 5 do
  # body omitted
end

until x &gt; 5 do
  # body omitted
end

# good
while x &gt; 5
  # body omitted
end

until x &gt; 5
  # body omitted
end
</code></pre>
  </li>
  <li>
    <p><a name="while-as-a-modifier"></a>
Favor modifier <code class="highlighter-rouge">while/until</code> usage when you have a single-line body.
<sup>[<a href="#while-as-a-modifier">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
while some_condition
  do_something
end

# good
do_something while some_condition
</code></pre>
  </li>
  <li>
    <p><a name="until-for-negatives"></a>
Favor <code class="highlighter-rouge">until</code> over <code class="highlighter-rouge">while</code> for negative conditions.
<sup>[<a href="#until-for-negatives">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
do_something while !some_condition

# good
do_something until some_condition
</code></pre>
  </li>
  <li>
    <p><a name="infinite-loop"></a>
Use <code class="highlighter-rouge">Kernel#loop</code> instead of <code class="highlighter-rouge">while/until</code> when you need an infinite loop.
<sup>[<a href="#infinite-loop">link</a>]</sup></p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># bad</span>
<span class="k">while</span> <span class="kp">true</span>
  <span class="n">do_something</span>
<span class="k">end</span>

<span class="k">until</span> <span class="kp">false</span>
  <span class="n">do_something</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="kp">loop</span> <span class="k">do</span>
  <span class="n">do_something</span>
<span class="k">end</span>
</code></pre>
    </div>
  </li>
  <li>
    <p><a name="loop-with-break"></a>
Use <code class="highlighter-rouge">Kernel#loop</code> with <code class="highlighter-rouge">break</code> rather than <code class="highlighter-rouge">begin/end/until</code> or
<code class="highlighter-rouge">begin/end/while</code> for post-loop tests.
<sup>[<a href="#loop-with-break">link</a>]</sup></p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># bad</span>
<span class="k">begin</span>
  <span class="nb">puts</span> <span class="n">val</span>
  <span class="n">val</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">end</span> <span class="k">while</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span>

<span class="c1"># good</span>
<span class="kp">loop</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="n">val</span>
  <span class="n">val</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">break</span> <span class="k">unless</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span>
<span class="k">end</span>
</code></pre>
    </div>
  </li>
  <li>
    <p><a name="no-dsl-parens"></a>
Omit parentheses around parameters for methods that are part of an internal
DSL (e.g. Rake, Rails, RSpec), methods that have “keyword” status in Ruby
(e.g. <code class="highlighter-rouge">attr_reader</code>, <code class="highlighter-rouge">puts</code>) and attribute access methods. Use parentheses
around the arguments of all other method invocations.
<sup>[<a href="#no-dsl-parens">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Person
  # bad
  attr_reader(:name, :age)
  # good
  attr_reader :name, :age

  # body omitted
end

# bad
temperance = Person.new 'Temperance', 30
# good
temperance = Person.new('Temperance', 30)

# bad
puts(temperance.age)
# good
puts temperance.age

# bad
x = Math.sin y
# good
x = Math.sin(y)

# bad
array.delete e
# good
array.delete(e)

# bad
expect(bowling.score).to eq 0
# good
expect(bowling.score).to eq(0)
</code></pre>
  </li>
  <li>
    <p><a name="no-braces-opts-hash"></a>
Omit the outer braces around an implicit options hash.
<sup>[<a href="#no-braces-opts-hash">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
user.set({ name: 'John', age: 45, permissions: { read: true } })

# good
user.set(name: 'John', age: 45, permissions: { read: true })
</code></pre>
  </li>
  <li>
    <p><a name="no-dsl-decorating"></a>
Omit both the outer braces and parentheses for methods that are part of an
internal DSL.
<sup>[<a href="#no-dsl-decorating">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Person &lt; ActiveRecord::Base
  # bad
  validates(:name, { presence: true, length: { within: 1..10 } })

  # good
  validates :name, presence: true, length: { within: 1..10 }
end
</code></pre>
  </li>
  <li>
    <p><a name="no-args-no-parens"></a>
Omit parentheses for method calls with no arguments.
<sup>[<a href="#no-args-no-parens">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
Kernel.exit!()
2.even?()
fork()
'test'.upcase()

# good
Kernel.exit!
2.even?
fork
'test'.upcase
</code></pre>
  </li>
  <li>
    <p><a name="single-action-blocks"></a>
Use the proc invocation shorthand when the invoked method is the only operation of a block.
<sup>[<a href="#single-action-blocks">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
names.map { |name| name.upcase }

# good
names.map(&amp;:upcase)
</code></pre>
  </li>
  <li>
    <p><a name="single-line-blocks"></a>
Prefer <code class="highlighter-rouge"><span class="p">{</span><span class="err">...</span><span class="p">}</span></code> over <code class="highlighter-rouge">do...end</code> for single-line blocks.  Avoid using <code class="highlighter-rouge"><span class="p">{</span><span class="err">...</span><span class="p">}</span></code>
for multi-line blocks (multi-line chaining is always ugly). Always use
<code class="highlighter-rouge">do...end</code> for “control flow” and “method definitions” (e.g. in Rakefiles and
certain DSLs).  Avoid <code class="highlighter-rouge">do...end</code> when chaining.
<sup>[<a href="#single-line-blocks">link</a>]</sup></p>

    <pre><code class="language-Ruby">names = %w(Bozhidar Steve Sarah)

# bad
names.each do |name|
  puts name
end

# good
names.each { |name| puts name }

# bad
names.select do |name|
  name.start_with?('S')
end.map { |name| name.upcase }

# good
names.select { |name| name.start_with?('S') }.map(&amp;:upcase)
</code></pre>

    <p>Some will argue that multi-line chaining would look OK with the use of {…},
but they should ask themselves—is this code really readable and can the
blocks’ contents be extracted into nifty methods?</p>
  </li>
  <li>
    <p><a name="block-argument"></a>
Consider using explicit block argument to avoid writing block literal that
just passes its arguments to another block. Beware of the performance impact,
though, as the block gets converted to a Proc.
<sup>[<a href="#block-argument">link</a>]</sup></p>

    <pre><code class="language-Ruby">require 'tempfile'

# bad
def with_tmp_dir
  Dir.mktmpdir do |tmp_dir|
    Dir.chdir(tmp_dir) { |dir| yield dir }  # block just passes arguments
  end
end

# good
def with_tmp_dir(&amp;block)
  Dir.mktmpdir do |tmp_dir|
    Dir.chdir(tmp_dir, &amp;block)
  end
end

with_tmp_dir do |dir|
  puts "dir is accessible as a parameter and pwd is set: #{dir}"
end
</code></pre>
  </li>
  <li>
    <p><a name="no-explicit-return"></a>
Avoid <code class="highlighter-rouge">return</code> where not required for flow of control.
<sup>[<a href="#no-explicit-return">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
def some_method(some_arr)
  return some_arr.size
end

# good
def some_method(some_arr)
  some_arr.size
end
</code></pre>
  </li>
  <li>
    <p><a name="no-self-unless-required"></a>
Avoid <code class="highlighter-rouge">self</code> where not required. (It is only required when calling a self
write accessor.)
<sup>[<a href="#no-self-unless-required">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
def ready?
  if self.last_reviewed_at &gt; self.last_updated_at
    self.worker.update(self.content, self.options)
    self.status = :in_progress
  end
  self.status == :verified
end

# good
def ready?
  if last_reviewed_at &gt; last_updated_at
    worker.update(content, options)
    self.status = :in_progress
  end
  status == :verified
end
</code></pre>
  </li>
  <li>
    <p><a name="no-shadowing"></a>
As a corollary, avoid shadowing methods with local variables unless they are
both equivalent.
<sup>[<a href="#no-shadowing">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Foo
  attr_accessor :options

  # ok
  def initialize(options)
    self.options = options
    # both options and self.options are equivalent here
  end

  # bad
  def do_something(options = {})
    unless options[:when] == :later
      output(self.options[:message])
    end
  end

  # good
  def do_something(params = {})
    unless params[:when] == :later
      output(options[:message])
    end
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="safe-assignment-in-condition"></a>
Don’t use the return value of <code class="highlighter-rouge">=</code> (an assignment) in conditional expressions
unless the assignment is wrapped in parentheses. This is a fairly popular
idiom among Rubyists that’s sometimes referred to as <em>safe assignment in
condition</em>.
<sup>[<a href="#safe-assignment-in-condition">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad (+ a warning)
if v = array.grep(/foo/)
  do_something(v)
  # some code
end

# good (MRI would still complain, but RuboCop won't)
if (v = array.grep(/foo/))
  do_something(v)
  # some code
end

# good
v = array.grep(/foo/)
if v
  do_something(v)
  # some code
end
</code></pre>
  </li>
  <li>
    <p><a name="self-assignment"></a>
Use shorthand self assignment operators whenever applicable.
<sup>[<a href="#self-assignment">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
x = x + y
x = x * y
x = x**y
x = x / y
x = x || y
x = x &amp;&amp; y

# good
x += y
x *= y
x **= y
x /= y
x ||= y
x &amp;&amp;= y
</code></pre>
  </li>
  <li>
    <p><a name="double-pipe-for-uninit"></a>
Use <code class="highlighter-rouge">||=</code> to initialize variables only if they’re not already initialized.
<sup>[<a href="#double-pipe-for-uninit">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
name = name ? name : 'Bozhidar'

# bad
name = 'Bozhidar' unless name

# good - set name to 'Bozhidar', only if it's nil or false
name ||= 'Bozhidar'
</code></pre>
  </li>
  <li>
    <p><a name="no-double-pipes-for-bools"></a>
Don’t use <code class="highlighter-rouge">||=</code> to initialize boolean variables. (Consider what would happen
if the current value happened to be <code class="highlighter-rouge">false</code>.)
<sup>[<a href="#no-double-pipes-for-bools">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - would set enabled to true even if it was false
enabled ||= true

# good
enabled = true if enabled.nil?
</code></pre>
  </li>
  <li>
    <p><a name="double-amper-preprocess"></a>
Use <code class="highlighter-rouge">&amp;&amp;=</code> to preprocess variables that may or may not exist. Using <code class="highlighter-rouge">&amp;&amp;=</code>
will change the value only if it exists, removing the need to check its
existence with <code class="highlighter-rouge">if</code>.
<sup>[<a href="#double-amper-preprocess">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
if something
  something = something.downcase
end

# bad
something = something ? something.downcase : nil

# ok
something = something.downcase if something

# good
something = something &amp;&amp; something.downcase

# better
something &amp;&amp;= something.downcase
</code></pre>
  </li>
  <li>
    <p><a name="no-case-equality"></a>
Avoid explicit use of the case equality operator <code class="highlighter-rouge">===</code>. As its name implies
it is meant to be used implicitly by <code class="highlighter-rouge">case</code> expressions and outside of them it
yields some pretty confusing code.
<sup>[<a href="#no-case-equality">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
Array === something
(1..100) === 7
/something/ === some_string

# good
something.is_a?(Array)
(1..100).include?(7)
some_string =~ /something/
</code></pre>
  </li>
  <li>
    <p><a name="parens-no-spaces"></a>
Do not put a space between a method name and the opening parenthesis.
<sup>[<a href="#parens-no-spaces">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
f (3 + 2) + 1

# good
f(3 + 2) + 1
</code></pre>
  </li>
  <li>
    <p><a name="no-nested-methods"></a>
Do not use nested method definitions, use lambda instead.
Nested method definitions actually produce methods in the same scope
(e.g. class) as the outer method. Furthermore, the “nested method” will be
redefined every time the method containing its definition is invoked.
<sup>[<a href="#no-nested-methods">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
def foo(x)
  def bar(y)
    # body omitted
  end

  bar(x)
end

# good - the same as the previous, but no bar redefinition on every foo call
def bar(y)
  # body omitted
end

def foo(x)
  bar(x)
end

# also good
def foo(x)
  bar = -&gt;(y) { ... }
  bar.call(x)
end
</code></pre>
  </li>
  <li>
    <p><a name="lambda-multi-line"></a>
Use the new lambda literal syntax for single line body blocks. Use the
<code class="highlighter-rouge">lambda</code> method for multi-line blocks.
<sup>[<a href="#lambda-multi-line">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
l = lambda { |a, b| a + b }
l.call(1, 2)

# correct, but looks extremely awkward
l = -&gt;(a, b) do
  tmp = a * 7
  tmp * b / 50
end

# good
l = -&gt;(a, b) { a + b }
l.call(1, 2)

l = lambda do |a, b|
  tmp = a * 7
  tmp * b / 50
end
</code></pre>
  </li>
  <li>
    <p><a name="stabby-lambda-with-args"></a>
Don’t omit the parameter parentheses when defining a stabby lambda with
parameters.
<sup>[<a href="#stabby-lambda-with-args">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
l = -&gt;x, y { something(x, y) }

# good
l = -&gt;(x, y) { something(x, y) }
</code></pre>
  </li>
  <li>
    <p><a name="stabby-lambda-no-args"></a>
Omit the parameter parentheses when defining a stabby lambda with
no parameters.
<sup>[<a href="#stabby-lambda-no-args">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
l = -&gt;() { something }

# good
l = -&gt; { something }
</code></pre>
  </li>
  <li>
    <p><a name="proc"></a>
Prefer <code class="highlighter-rouge">proc</code> over <code class="highlighter-rouge">Proc.new</code>.
<sup>[<a href="#proc">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
p = Proc.new { |n| puts n }

# good
p = proc { |n| puts n }
</code></pre>
  </li>
  <li>
    <p><a name="proc-call"></a>
Prefer <code class="highlighter-rouge">proc.call()</code> over <code class="highlighter-rouge">proc[]</code> or <code class="highlighter-rouge">proc.()</code> for both lambdas and procs.
<sup>[<a href="#proc-call">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - looks similar to Enumeration access
l = -&gt;(v) { puts v }
l[1]

# also bad - uncommon syntax
l = -&gt;(v) { puts v }
l.(1)

# good
l = -&gt;(v) { puts v }
l.call(1)
</code></pre>
  </li>
  <li>
    <p><a name="underscore-unused-vars"></a>
Prefix with <code class="highlighter-rouge">_</code> unused block parameters and local variables. It’s also
acceptable to use just <code class="highlighter-rouge">_</code> (although it’s a bit less descriptive). This
convention is recognized by the Ruby interpreter and tools like RuboCop and
will suppress their unused variable warnings.
<sup>[<a href="#underscore-unused-vars">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
result = hash.map { |k, v| v + 1 }

def something(x)
  unused_var, used_var = something_else(x)
  # some code
end

# good
result = hash.map { |_k, v| v + 1 }

def something(x)
  _unused_var, used_var = something_else(x)
  # some code
end

# good
result = hash.map { |_, v| v + 1 }

def something(x)
  _, used_var = something_else(x)
  # some code
end
</code></pre>
  </li>
  <li>
    <p><a name="sprintf"></a>
Favor the use of <code class="highlighter-rouge">sprintf</code> and its alias <code class="highlighter-rouge">format</code> over the fairly cryptic
<code class="highlighter-rouge">String#%</code> method.
<sup>[<a href="#sprintf">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
'%d %d' % [20, 10]
# =&gt; '20 10'

# good
sprintf('%d %d', 20, 10)
# =&gt; '20 10'

# good
sprintf('%{first} %{second}', first: 20, second: 10)
# =&gt; '20 10'

format('%d %d', 20, 10)
# =&gt; '20 10'

# good
format('%{first} %{second}', first: 20, second: 10)
# =&gt; '20 10'
</code></pre>
  </li>
  <li>
    <p><a name="array-join"></a>
Favor the use of <code class="highlighter-rouge">Array#join</code> over the fairly cryptic <code class="highlighter-rouge">Array#*</code> with
a string argument.
<sup>[<a href="#array-join">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
%w(one two three) * ', '
# =&gt; 'one, two, three'

# good
%w(one two three).join(', ')
# =&gt; 'one, two, three'
</code></pre>
  </li>
  <li>
    <p><a name="array-coercion"></a>
Use <code class="highlighter-rouge">Array()</code> instead of explicit <code class="highlighter-rouge">Array</code> check or <code class="highlighter-rouge">[*var]</code>, when dealing
with a variable you want to treat as an Array, but you’re not certain it’s an
array.
<sup>[<a href="#array-coercion">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
paths = [paths] unless paths.is_a? Array
paths.each { |path| do_something(path) }

# bad (always creates a new Array instance)
[*paths].each { |path| do_something(path) }

# good (and a bit more readable)
Array(paths).each { |path| do_something(path) }
</code></pre>
  </li>
  <li>
    <p><a name="ranges-or-between"></a>
Use ranges or <code class="highlighter-rouge">Comparable#between?</code> instead of complex comparison logic when
possible.
<sup>[<a href="#ranges-or-between">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
do_something if x &gt;= 1000 &amp;&amp; x &lt;= 2000

# good
do_something if (1000..2000).include?(x)

# good
do_something if x.between?(1000, 2000)
</code></pre>
  </li>
  <li>
    <p><a name="predicate-methods"></a>
Favor the use of predicate methods to explicit comparisons with <code class="highlighter-rouge">==</code>.
Numeric comparisons are OK.
<sup>[<a href="#predicate-methods">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
if x % 2 == 0
end

if x % 2 == 1
end

if x == nil
end

# good
if x.even?
end

if x.odd?
end

if x.nil?
end

if x.zero?
end

if x == 0
end
</code></pre>
  </li>
  <li>
    <p><a name="no-non-nil-checks"></a>
Don’t do explicit non-<code class="highlighter-rouge">nil</code> checks unless you’re dealing with boolean
values.
<sup>[<a href="#no-non-nil-checks">link</a>]</sup></p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># bad</span>
<span class="n">do_something</span> <span class="k">if</span> <span class="o">!</span><span class="n">something</span><span class="p">.</span><span class="nf">nil?</span>
<span class="n">do_something</span> <span class="k">if</span> <span class="n">something</span> <span class="o">!=</span> <span class="kp">nil</span>

<span class="c1"># good</span>
<span class="n">do_something</span> <span class="k">if</span> <span class="n">something</span>

<span class="c1"># good - dealing with a boolean</span>
<span class="k">def</span> <span class="nf">value_set?</span>
  <span class="o">!</span><span class="vi">@some_boolean</span><span class="p">.</span><span class="nf">nil?</span>
<span class="k">end</span>
</code></pre>
    </div>
  </li>
  <li>
    <p><a name="no-nested-conditionals"></a>
Avoid use of nested conditionals for flow of control.
<sup>[<a href="#no-nested-conditionals">link</a>]</sup></p>

    <p>Prefer a guard clause when you can assert invalid data. A guard clause
is a conditional statement at the top of a function that bails out as
soon as it can.</p>

    <pre><code class="language-Ruby"># bad
def compute_thing(thing)
  if thing[:foo]
    update_with_bar(thing[:foo])
    if thing[:foo][:bar]
      partial_compute(thing)
    else
      re_compute(thing)
    end
  end
end

# good
def compute_thing(thing)
  return unless thing[:foo]
  update_with_bar(thing[:foo])
  return re_compute(thing) unless thing[:foo][:bar]
  partial_compute(thing)
end
</code></pre>

    <p>Prefer <code class="highlighter-rouge">next</code> in loops instead of conditional blocks.</p>

    <pre><code class="language-Ruby"># bad
[0, 1, 2, 3].each do |item|
  if item &gt; 1
    puts item
  end
end

# good
[0, 1, 2, 3].each do |item|
  next unless item &gt; 1
  puts item
end
</code></pre>
  </li>
  <li>
    <p><a name="map-find-select-reduce-size"></a>
Prefer <code class="highlighter-rouge">map</code> over <code class="highlighter-rouge">collect</code>, <code class="highlighter-rouge">find</code> over <code class="highlighter-rouge">detect</code>, <code class="highlighter-rouge">select</code> over <code class="highlighter-rouge">find_all</code>,
<code class="highlighter-rouge">reduce</code> over <code class="highlighter-rouge">inject</code> and <code class="highlighter-rouge">size</code> over <code class="highlighter-rouge">length</code>. This is not a hard
requirement; if the use of the alias enhances readability, it’s ok to use it.
The rhyming methods are inherited from Smalltalk and are not common in other
programming languages. The reason the use of <code class="highlighter-rouge">select</code> is encouraged over
<code class="highlighter-rouge">find_all</code> is that it goes together nicely with <code class="highlighter-rouge">reject</code> and its name is
pretty self-explanatory.
<sup>[<a href="#map-find-select-reduce-size">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="count-vs-size"></a>
Don’t use <code class="highlighter-rouge">count</code> as a substitute for <code class="highlighter-rouge">size</code>. For <code class="highlighter-rouge">Enumerable</code> objects other
than <code class="highlighter-rouge">Array</code> it will iterate the entire collection in order to determine its
size.
<sup>[<a href="#count-vs-size">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
some_hash.count

# good
some_hash.size
</code></pre>
  </li>
  <li>
    <p><a name="flat-map"></a>
Use <code class="highlighter-rouge">flat_map</code> instead of <code class="highlighter-rouge">map</code> + <code class="highlighter-rouge">flatten</code>.  This does not apply for arrays
with a depth greater than 2, i.e.  if <code class="highlighter-rouge">users.first.songs == ['a', ['b','c']]</code>,
then use <code class="highlighter-rouge">map + flatten</code> rather than <code class="highlighter-rouge">flat_map</code>.  <code class="highlighter-rouge">flat_map</code> flattens the
array by 1, whereas <code class="highlighter-rouge">flatten</code> flattens it all the way.
<sup>[<a href="#flat-map">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
all_songs = users.map(&amp;:songs).flatten.uniq

# good
all_songs = users.flat_map(&amp;:songs).uniq
</code></pre>
  </li>
  <li>
    <p><a name="reverse-each"></a>
Prefer <code class="highlighter-rouge">reverse_each</code> to <code class="highlighter-rouge">reverse.each</code> because some classes that <code class="highlighter-rouge">include
Enumerable</code> will provide an efficient implementation. Even in the worst case
where a class does not provide a specialized implementation, the general
implementation inherited from <code class="highlighter-rouge">Enumerable</code> will be at least as efficient as
using <code class="highlighter-rouge">reverse.each</code>.
<sup>[<a href="#reverse-each">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
array.reverse.each { ... }

# good
array.reverse_each { ... }
</code></pre>
  </li>
</ul>

<h3 id="naming">Naming</h3>

<ul>
  <li>
    <p><a name="snake-case-symbols-methods-vars"></a>
Use <code class="highlighter-rouge">snake_case</code> for symbols, methods and variables.
<sup>[<a href="#snake-case-symbols-methods-vars">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
:'some symbol'
:SomeSymbol
:someSymbol

someVar = 5

def someMethod
  # some code
end

def SomeMethod
  # some code
end

# good
:some_symbol

def some_method
  # some code
end
</code></pre>
  </li>
  <li>
    <p><a name="camelcase-classes"></a>
Use <code class="highlighter-rouge">CamelCase</code> for classes and modules.  (Keep acronyms like HTTP, RFC, XML
uppercase.)
<sup>[<a href="#camelcase-classes">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
class Someclass
  # some code
end

class Some_Class
  # some code
end

class SomeXml
  # some code
end

class XmlSomething
  # some code
end

# good
class SomeClass
  # some code
end

class SomeXML
  # some code
end

class XMLSomething
  # some code
end
</code></pre>
  </li>
  <li>
    <p><a name="snake-case-files"></a>
Use <code class="highlighter-rouge">snake_case</code> for naming files, e.g. <code class="highlighter-rouge">hello_world.rb</code>.
<sup>[<a href="#snake-case-files">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="snake-case-dirs"></a>
Use <code class="highlighter-rouge">snake_case</code> for naming directories, e.g.
<code class="highlighter-rouge">lib/hello_world/hello_world.rb</code>.
<sup>[<a href="#snake-case-dirs">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="one-class-per-file"></a>
Aim to have just a single class/module per source file. Name the file name
as the class/module, but replacing CamelCase with snake_case.
<sup>[<a href="#one-class-per-file">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="screaming-snake-case"></a>
Use <code class="highlighter-rouge">SCREAMING_SNAKE_CASE</code> for other constants.
<sup>[<a href="#screaming-snake-case">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
SomeConst = 5

# good
SOME_CONST = 5
</code></pre>
  </li>
  <li>
    <p><a name="bool-methods-qmark"></a>
The names of predicate methods (methods that return a boolean value) should
end in a question mark.  (i.e. <code class="highlighter-rouge">Array#empty?</code>). Methods that don’t return a
boolean, shouldn’t end in a question mark.
<sup>[<a href="#bool-methods-qmark">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="bool-methods-prefix"></a>
Avoid prefixing predicate methods with the auxiliary verbs such as <code class="highlighter-rouge">is</code>,
<code class="highlighter-rouge">does</code>, or <code class="highlighter-rouge">can</code>.  These words are redundant and inconsistent with the style of
boolean methods in the Ruby core library, such as <code class="highlighter-rouge">empty?</code> and <code class="highlighter-rouge">include?</code>.
<sup>[<a href="#bool-methods-prefix">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
class Person
  def is_tall?
    true
  end

  def can_play_basketball?
    false
  end

  def does_like_candy?
    true
  end
end

# good
class Person
  def tall?
    true
  end

  def basketball_player?
    false
  end

  def likes_candy?
    true
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="dangerous-method-bang"></a>
The names of potentially <em>dangerous</em> methods (i.e. methods that modify
<code class="highlighter-rouge">self</code> or the arguments, <code class="highlighter-rouge">exit!</code> (doesn’t run the finalizers like <code class="highlighter-rouge">exit</code>
does), etc.) should end with an exclamation mark if there exists a safe
version of that <em>dangerous</em> method.
<sup>[<a href="#dangerous-method-bang">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - there is no matching 'safe' method
class Person
  def update!
  end
end

# good
class Person
  def update
  end
end

# good
class Person
  def update!
  end

  def update
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="safe-because-unsafe"></a>
Define the non-bang (safe) method in terms of the bang (dangerous) one if
possible.
<sup>[<a href="#safe-because-unsafe">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Array
  def flatten_once!
    res = []

    each do |e|
      [*e].each { |f| res &lt;&lt; f }
    end

    replace(res)
  end

  def flatten_once
    dup.flatten_once!
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="reduce-blocks"></a>
When using <code class="highlighter-rouge">reduce</code> with short blocks, name the arguments <code class="highlighter-rouge">|a, e|</code>
(accumulator, element).
<sup>[<a href="#reduce-blocks">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="other-arg"></a>
When defining binary operators, name the parameter <code class="highlighter-rouge">other</code>(<code class="highlighter-rouge">&lt;&lt;</code> and <code class="highlighter-rouge">[]</code> are
exceptions to the rule, since their semantics are different).
<sup>[<a href="#other-arg">link</a>]</sup></p>

    <pre><code class="language-Ruby">def +(other)
  # body omitted
end
</code></pre>
  </li>
</ul>

<h3 id="classes--modules">Classes &amp; Modules</h3>

<ul>
  <li>
    <p><a name="consistent-classes"></a>
Use a consistent structure in your class definitions.
<sup>[<a href="#consistent-classes">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Person
  # extend and include go first
  extend SomeModule
  include AnotherModule

  # inner classes
  CustomErrorKlass = Class.new(StandardError)

  # constants are next
  SOME_CONSTANT = 20

  # afterwards we have attribute macros
  attr_reader :name

  # followed by other macros (if any)
  validates :name

  # public class methods are next in line
  def self.some_method
  end

  # initialization goes between class methods and other instance methods
  def initialize
  end

  # followed by other public instance methods
  def some_method
  end

  # protected and private methods are grouped near the end
  protected

  def some_protected_method
  end

  private

  def some_private_method
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="file-classes"></a>
Don’t nest multi-line classes within classes. Try to have such nested
classes each in their own file in a folder named like the containing class.
<sup>[<a href="#file-classes">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad

# foo.rb
class Foo
  class Bar
    # 30 methods inside
  end

  class Car
    # 20 methods inside
  end

  # 30 methods inside
end

# good

# foo.rb
class Foo
  # 30 methods inside
end

# foo/bar.rb
class Foo
  class Bar
    # 30 methods inside
  end
end

# foo/car.rb
class Foo
  class Car
    # 20 methods inside
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="modules-vs-classes"></a>
Prefer modules to classes with only class methods. Classes should be used
only when it makes sense to create instances out of them.
<sup>[<a href="#modules-vs-classes">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
class SomeClass
  def self.some_method
    # body omitted
  end

  def self.some_other_method
    # body omitted
  end
end

# good
module SomeModule
  module_function

  def some_method
    # body omitted
  end

  def some_other_method
    # body omitted
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="define-to-s"></a>
Always supply a proper <code class="highlighter-rouge">to_s</code> method for classes that represent domain
objects.
<sup>[<a href="#define-to-s">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Person
  attr_reader :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end

  def to_s
    "#{@first_name} #{@last_name}"
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="attr_family"></a>
Use the <code class="highlighter-rouge">attr</code> family of functions to define trivial accessors or mutators.
<sup>[<a href="#attr_family">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
class Person
  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end

  def first_name
    @first_name
  end

  def last_name
    @last_name
  end
end

# good
class Person
  attr_reader :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="accessor_mutator_method_names"></a>
For accessors and mutators, avoid prefixing method names with
<code class="highlighter-rouge">get_</code> and <code class="highlighter-rouge">set_</code>.
It is a Ruby convention to use attribute names for accessors (readers) and
<code class="highlighter-rouge">attr_name=</code> for mutators (writers).
<sup>[<a href="#accessor_mutator_method_names">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
class Person
  def get_name
    "#{@first_name} #{@last_name}"
  end

  def set_name(name)
    @first_name, @last_name = name.split(' ')
  end
end

# good
class Person
  def name
    "#{@first_name} #{@last_name}"
  end

  def name=(name)
    @first_name, @last_name = name.split(' ')
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="attr"></a>
Avoid the use of <code class="highlighter-rouge">attr</code>. Use <code class="highlighter-rouge">attr_reader</code> and <code class="highlighter-rouge">attr_accessor</code> instead.
<sup>[<a href="#attr">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - creates a single attribute accessor (deprecated in Ruby 1.9)
attr :something, true
attr :one, :two, :three # behaves as attr_reader

# good
attr_accessor :something
attr_reader :one, :two, :three
</code></pre>
  </li>
  <li>
    <p><a name="struct-new"></a>
Consider using <code class="highlighter-rouge">Struct.new</code>, which defines the trivial accessors,
constructor and comparison operators for you.
<sup>[<a href="#struct-new">link</a>]</sup></p>

    <pre><code class="language-Ruby"># good
class Person
  attr_accessor :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end
end

# better
Person = Struct.new(:first_name, :last_name) do
end
</code></pre>
  </li>
  <li>
    <p><a name="no-extend-struct-new"></a>
Don’t extend an instance initialized by <code class="highlighter-rouge">Struct.new</code>. Extending it introduces
a superfluous class level and may also introduce weird errors if the file is
required multiple times.
<sup>[<a href="#no-extend-struct-new">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
class Person &lt; Struct.new(:first_name, :last_name)
end

# good
Person = Struct.new(:first_name, :last_name)
</code></pre>
  </li>
  <li>
    <p><a name="factory-methods"></a>
Consider adding factory methods to provide additional sensible ways to
create instances of a particular class.
<sup>[<a href="#factory-methods">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Person
  def self.create(options_hash)
    # body omitted
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="duck-typing"></a>
Prefer <a href="https://en.wikipedia.org/wiki/Duck_typing">duck-typing</a> over
inheritance.
<sup>[<a href="#duck-typing">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
class Animal
  # abstract method
  def speak
  end
end

# extend superclass
class Duck &lt; Animal
  def speak
    puts 'Quack! Quack'
  end
end

# extend superclass
class Dog &lt; Animal
  def speak
    puts 'Bau! Bau!'
  end
end

# good
class Duck
  def speak
    puts 'Quack! Quack'
  end
end

class Dog
  def speak
    puts 'Bau! Bau!'
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="no-class-vars"></a>
Avoid the usage of class (<code class="highlighter-rouge">@@</code>) variables due to their “nasty” behavior in
inheritance.
<sup>[<a href="#no-class-vars">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Parent
  @@class_var = 'parent'

  def self.print_class_var
    puts @@class_var
  end
end

class Child &lt; Parent
  @@class_var = 'child'
end

Parent.print_class_var # =&gt; will print 'child'
</code></pre>

    <p>As you can see all the classes in a class hierarchy actually share one
class variable. Class instance variables should usually be preferred
over class variables.</p>
  </li>
  <li>
    <p><a name="visibility"></a>
Assign proper visibility levels to methods (<code class="highlighter-rouge">private</code>, <code class="highlighter-rouge">protected</code>) in
accordance with their intended usage. Don’t go off leaving everything <code class="highlighter-rouge">public</code>
(which is the default). After all we’re coding in <em>Ruby</em> now, not in <em>Python</em>.
<sup>[<a href="#visibility">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="indent-public-private-protected"></a>
Indent the <code class="highlighter-rouge">public</code>, <code class="highlighter-rouge">protected</code>, and <code class="highlighter-rouge">private</code> methods as much as the method
definitions they apply to. Leave one blank line above the visibility modifier
and one blank line below in order to emphasize that it applies to all methods
below it.
<sup>[<a href="#indent-public-private-protected">link</a>]</sup></p>

    <pre><code class="language-Ruby">class SomeClass
  def public_method
    # some code
  end

  private

  def private_method
    # some code
  end

  def another_private_method
    # some code
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="def-self-class-methods"></a>
Use <code class="highlighter-rouge">def self.method</code> to define class methods. This makes the code
easier to refactor since the class name is not repeated.
<sup>[<a href="#def-self-class-methods">link</a>]</sup></p>

    <pre><code class="language-Ruby">class TestClass
  # bad
  def TestClass.some_method
    # body omitted
  end

  # good
  def self.some_other_method
    # body omitted
  end

  # Also possible and convenient when you
  # have to define many class methods.
  class &lt;&lt; self
    def first_method
      # body omitted
    end

    def second_method_etc
      # body omitted
    end
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="alias-method-lexically"></a>
Prefer <code class="highlighter-rouge">alias</code> when aliasing methods in lexical class scope as the
resolution of <code class="highlighter-rouge">self</code> in this context is also lexical, and it communicates
clearly to the user that the indirection of your alias will not be altered
at runtime or by any subclass unless made explicit.
<sup>[<a href="#alias-method-lexically">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Westerner
  def first_name
    @names.first
  end

  alias given_name first_name
end
</code></pre>

    <p>Since <code class="highlighter-rouge">alias</code>, like <code class="highlighter-rouge">def</code>, is a keyword, prefer bareword arguments over
symbols or strings. In other words, do <code class="highlighter-rouge">alias foo bar</code>, not
<code class="highlighter-rouge">alias :foo :bar</code>.</p>

    <p>Also be aware of how Ruby handles aliases and inheritance: an alias
references the method that was resolved at the time the alias was defined;
it is not dispatched dynamically.</p>

    <pre><code class="language-Ruby">class Fugitive &lt; Westerner
  def first_name
    'Nobody'
  end
end
</code></pre>

    <p>In this example, <code class="highlighter-rouge">Fugitive#given_name</code> would still call the original
<code class="highlighter-rouge">Westerner#first_name</code> method, not <code class="highlighter-rouge">Fugitive#first_name</code>. To override the
behavior of <code class="highlighter-rouge">Fugitive#given_name</code> as well, you’d have to redefine it in the
derived class.</p>

    <pre><code class="language-Ruby">class Fugitive &lt; Westerner
  def first_name
    'Nobody'
  end

  alias given_name first_name
end
</code></pre>
  </li>
  <li>
    <p><a name="alias-method"></a>
Always use <code class="highlighter-rouge">alias_method</code> when aliasing methods of modules, classes, or
singleton classes at runtime, as the lexical scope of <code class="highlighter-rouge">alias</code> leads to
unpredictability in these cases.
<sup>[<a href="#alias-method">link</a>]</sup></p>

    <pre><code class="language-Ruby">module Mononymous
  def self.included(other)
    other.class_eval { alias_method :full_name, :given_name }
  end
end

class Sting &lt; Westerner
  include Mononymous
end
</code></pre>
  </li>
</ul>

<h3 id="exceptions">Exceptions</h3>

<ul>
  <li>
    <p><a name="prefer-raise-over-fail"></a>
Prefer <code class="highlighter-rouge">raise</code> over <code class="highlighter-rouge">fail</code> for exceptions.
<sup>[<a href="#prefer-raise-over-fail">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
fail SomeException, 'message'

# good
raise SomeException, 'message'
</code></pre>
  </li>
  <li>
    <p><a name="begin-implicit"></a>
Use <em>implicit begin blocks</em> where possible.
<sup>[<a href="#begin-implicit">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
def foo
  begin
    # main logic goes here
  rescue
    # failure handling goes here
  end
end

# good
def foo
  # main logic goes here
rescue
  # failure handling goes here
end
</code></pre>
  </li>
  <li>
    <p><a name="dont-hide-exceptions"></a>
Don’t suppress exceptions.
<sup>[<a href="#dont-hide-exceptions">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
begin
  # an exception occurs here
rescue SomeError
  # the rescue clause does absolutely nothing
end

# bad
do_something rescue nil
</code></pre>
  </li>
  <li>
    <p><a name="no-rescue-modifiers"></a>
Avoid using <code class="highlighter-rouge">rescue</code> in its modifier form.
<sup>[<a href="#no-rescue-modifiers">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - this catches exceptions of StandardError class and its descendant classes
read_file rescue handle_error($!)

# good - this catches only the exceptions of Errno::ENOENT class and its descendant classes
def foo
  read_file
rescue Errno::ENOENT =&gt; ex
  handle_error(ex)
end
</code></pre>
  </li>
  <li>
    <p><a name="no-exceptional-flows"></a>
Don’t use exceptions for flow of control.
<sup>[<a href="#no-exceptional-flows">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
begin
  n / d
rescue ZeroDivisionError
  puts 'Cannot divide by 0!'
end

# good
if d.zero?
  puts 'Cannot divide by 0!'
else
  n / d
end
</code></pre>
  </li>
  <li>
    <p><a name="no-blind-rescues"></a>
Avoid rescuing the <code class="highlighter-rouge">Exception</code> class.  This will trap signals and calls to
<code class="highlighter-rouge">exit</code>, requiring you to <code class="highlighter-rouge">kill -9</code> the process.
<sup>[<a href="#no-blind-rescues">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
begin
  # calls to exit and kill signals will be caught (except kill -9)
  exit
rescue Exception
  puts "you didn't really want to exit, right?"
  # exception handling
end

# good
begin
  # a blind rescue rescues from StandardError, not Exception as many
  # programmers assume.
rescue =&gt; e
  # exception handling
end

# also good
begin
  # an exception occurs here
rescue StandardError =&gt; e
  # exception handling
end
</code></pre>
  </li>
  <li>
    <p><a name="exception-ordering"></a>
Put more specific exceptions higher up the rescue chain, otherwise they’ll
never be rescued from.
<sup>[<a href="#exception-ordering">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
begin
  # some code
rescue StandardError =&gt; e
  # some handling
rescue IOError =&gt; e
  # some handling that will never be executed
end

# good
begin
  # some code
rescue IOError =&gt; e
  # some handling
rescue StandardError =&gt; e
  # some handling
end
</code></pre>
  </li>
  <li>
    <p><a name="standard-exceptions"></a>
Favor the use of exceptions from the standard library over introducing new
exception classes.
<sup>[<a href="#standard-exceptions">link</a>]</sup></p>
  </li>
</ul>

<h3 id="collections">Collections</h3>

<ul>
  <li>
    <p><a name="literal-array-hash"></a>
Prefer literal array and hash creation notation (unless you need to pass
parameters to their constructors, that is).
<sup>[<a href="#literal-array-hash">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
arr = Array.new
hash = Hash.new

# good
arr = []
hash = {}
</code></pre>
  </li>
  <li>
    <p><a name="percent-w"></a>
Prefer <code class="highlighter-rouge">%w</code> to the literal array syntax when you need an array of words
(non-empty strings without spaces and special characters in them).  Apply this
rule only to arrays with two or more elements.
<sup>[<a href="#percent-w">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
STATES = ['draft', 'open', 'closed']

# good
STATES = %w(draft open closed)
</code></pre>
  </li>
  <li>
    <p><a name="percent-i"></a>
Prefer <code class="highlighter-rouge">%i</code> to the literal array syntax when you need an array of symbols
(and you don’t need to maintain Ruby 1.9 compatibility). Apply this rule only
to arrays with two or more elements.
<sup>[<a href="#percent-i">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
STATES = [:draft, :open, :closed]

# good
STATES = %i(draft open closed)
</code></pre>
  </li>
  <li>
    <p><a name="no-trailing-array-commas"></a>
Avoid comma after the last item of an <code class="highlighter-rouge">Array</code> or <code class="highlighter-rouge">Hash</code> literal, especially
when the items are not on separate lines.
<sup>[<a href="#no-trailing-array-commas">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - easier to move/add/remove items, but still not preferred
VALUES = [
           1001,
           2020,
           3333,
         ]

# bad
VALUES = [1001, 2020, 3333, ]

# good
VALUES = [1001, 2020, 3333]
</code></pre>
  </li>
  <li>
    <p><a name="no-gappy-arrays"></a>
Avoid the creation of huge gaps in arrays.
<sup>[<a href="#no-gappy-arrays">link</a>]</sup></p>

    <pre><code class="language-Ruby">arr = []
arr[100] = 1 # now you have an array with lots of nils
</code></pre>
  </li>
  <li>
    <p><a name="first-and-last"></a>
When accessing the first or last element from an array, prefer <code class="highlighter-rouge">first</code> or
<code class="highlighter-rouge">last</code> over <code class="highlighter-rouge">[0]</code> or <code class="highlighter-rouge">[-1]</code>.
<sup>[<a href="#first-and-last">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="set-vs-array"></a>
Use <code class="highlighter-rouge">Set</code> instead of <code class="highlighter-rouge">Array</code> when dealing with unique elements. <code class="highlighter-rouge">Set</code>
implements a collection of unordered values with no duplicates. This is a
hybrid of <code class="highlighter-rouge">Array</code>’s intuitive inter-operation facilities and <code class="highlighter-rouge">Hash</code>’s fast
lookup.
<sup>[<a href="#set-vs-array">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="symbols-as-keys"></a>
Prefer symbols instead of strings as hash keys.
<sup>[<a href="#symbols-as-keys">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
hash = { 'one' =&gt; 1, 'two' =&gt; 2, 'three' =&gt; 3 }

# good
hash = { one: 1, two: 2, three: 3 }
</code></pre>
  </li>
  <li>
    <p><a name="no-mutable-keys"></a>
Avoid the use of mutable objects as hash keys.
<sup>[<a href="#no-mutable-keys">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="hash-literals"></a>
Use the Ruby 1.9 hash literal syntax when your hash keys are symbols.
<sup>[<a href="#hash-literals">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
hash = { :one =&gt; 1, :two =&gt; 2, :three =&gt; 3 }

# good
hash = { one: 1, two: 2, three: 3 }
</code></pre>
  </li>
  <li>
    <p><a name="no-mixed-hash-syntaces"></a>
Don’t mix the Ruby 1.9 hash syntax with hash rockets in the same hash
literal. When you’ve got keys that are not symbols stick to the hash rockets
syntax.
<sup>[<a href="#no-mixed-hash-syntaces">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
{ a: 1, 'b' =&gt; 2 }

# good
{ :a =&gt; 1, 'b' =&gt; 2 }
</code></pre>
  </li>
  <li>
    <p><a name="hash-key"></a>
Use <code class="highlighter-rouge">Hash#key?</code> instead of <code class="highlighter-rouge">Hash#has_key?</code> and <code class="highlighter-rouge">Hash#value?</code> instead of
<code class="highlighter-rouge">Hash#has_value?</code>. As noted
<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/43765">here</a> by
Matz, the longer forms are considered deprecated.
<sup>[<a href="#hash-key">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
hash.has_key?(:test)
hash.has_value?(value)

# good
hash.key?(:test)
hash.value?(value)
</code></pre>
  </li>
  <li>
    <p><a name="hash-each"></a>
Use <code class="highlighter-rouge">Hash#each_key</code> instead of <code class="highlighter-rouge">Hash#keys.each</code> and <code class="highlighter-rouge">Hash#each_value</code>
instead of <code class="highlighter-rouge">Hash#values.each</code>.
<sup>[<a href="#hash-each">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
hash.keys.each { |k| p k }
hash.values.each { |v| p v }
hash.each { |k, _v| p k }
hash.each { |_k, v| p v }

# good
hash.each_key { |k| p k }
hash.each_value { |v| p v }
</code></pre>
  </li>
  <li>
    <p><a name="hash-fetch"></a>
Use <code class="highlighter-rouge">Hash#fetch</code> when dealing with hash keys that should be present.
<sup>[<a href="#hash-fetch">link</a>]</sup></p>

    <pre><code class="language-Ruby">heroes = { batman: 'Bruce Wayne', superman: 'Clark Kent' }
# bad - if we make a mistake we might not spot it right away
heroes[:batman] # =&gt; 'Bruce Wayne'
heroes[:supermann] # =&gt; nil

# good - fetch raises a KeyError making the problem obvious
heroes.fetch(:supermann)
</code></pre>
  </li>
  <li>
    <p><a name="hash-fetch-defaults"></a>
Introduce default values for hash keys via <code class="highlighter-rouge">Hash#fetch</code> as opposed to using
custom logic.
<sup>[<a href="#hash-fetch-defaults">link</a>]</sup></p>

    <pre><code class="language-Ruby">batman = { name: 'Bruce Wayne', is_evil: false }

# bad - if we just use || operator with falsy value we won't get the expected result
batman[:is_evil] || true # =&gt; true

# good - fetch work correctly with falsy values
batman.fetch(:is_evil, true) # =&gt; false
</code></pre>
  </li>
  <li>
    <p><a name="use-hash-blocks"></a>
Prefer the use of the block instead of the default value in <code class="highlighter-rouge">Hash#fetch</code>
if the code that has to be evaluated may have side effects or be expensive.
<sup>[<a href="#use-hash-blocks">link</a>]</sup></p>

    <pre><code class="language-Ruby">batman = { name: 'Bruce Wayne' }

# bad - if we use the default value, we eager evaluate it
# so it can slow the program down if done multiple times
batman.fetch(:powers, obtain_batman_powers) # obtain_batman_powers is an expensive call

# good - blocks are lazy evaluated, so only triggered in case of KeyError exception
batman.fetch(:powers) { obtain_batman_powers }
</code></pre>
  </li>
  <li>
    <p><a name="hash-values-at"></a>
Use <code class="highlighter-rouge">Hash#values_at</code> when you need to retrieve several values consecutively
from a hash.
<sup>[<a href="#hash-values-at">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
email = data['email']
username = data['nickname']

# good
email, username = data.values_at('email', 'nickname')
</code></pre>
  </li>
  <li>
    <p><a name="ordered-hashes"></a>
Rely on the fact that as of Ruby 1.9 hashes are ordered.
<sup>[<a href="#ordered-hashes">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="no-modifying-collections"></a>
Do not modify a collection while traversing it.
<sup>[<a href="#no-modifying-collections">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="accessing-elements-directly"></a>
When accessing elements of a collection, avoid direct access
via <code class="highlighter-rouge">[n]</code> by using an alternate form of the reader method if it is
supplied. This guards you from calling <code class="highlighter-rouge">[]</code> on <code class="highlighter-rouge">nil</code>.
<sup>[<a href="#accessing-elements-directly">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
Regexp.last_match[1]

# good
Regexp.last_match(1)
</code></pre>
  </li>
  <li>
    <p><a name="provide-alternate-accessor-to-collections"></a>
When providing an accessor for a collection, provide an alternate form
to save users from checking for <code class="highlighter-rouge">nil</code> before accessing an element in
the collection.
<sup>[<a href="#provide-alternate-accessor-to-collections">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
def awesome_things
  @awesome_things
end

# good
def awesome_things(index = nil)
  if index &amp;&amp; @awesome_things
    @awesome_things[index]
  else
    @awesome_things
  end
end
</code></pre>
    <p>### Numbers</p>
  </li>
  <li>
    <p><a name="integer-type-checking"></a>
Use <code class="highlighter-rouge">Integer</code> check type of an integer number. Since <code class="highlighter-rouge">Fixnum</code> is
platform-dependent, checking against it will return different results on
32-bit and 64-bit machines.
<sup>[<a href="#integer-type-checking">link</a>]</sup></p>

    <pre><code class="language-Ruby">timestamp = Time.now.to_i

# bad
timestamp.is_a? Fixnum
timestamp.is_a? Bignum

# good
timestamp.is_a? Integer
</code></pre>
  </li>
</ul>

<h3 id="strings">Strings</h3>

<ul>
  <li>
    <p><a name="string-interpolation"></a>
Prefer string interpolation and string formatting instead of string
concatenation:
<sup>[<a href="#string-interpolation">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
email_with_name = user.name + ' &lt;' + user.email + '&gt;'

# good
email_with_name = "#{user.name} &lt;#{user.email}&gt;"

# good
email_with_name = format('%s &lt;%s&gt;', user.name, user.email)
</code></pre>
  </li>
  <li>
    <p><a name="consistent-string-literals"></a>
Adopt a consistent string literal quoting style. Prefer double-quotes unless your string literal contains <code class="highlighter-rouge">"</code> or escape characters you want to suppress.
<sup>[<a href="#consistent-string-literals">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
name = 'Bozhidar'

# good
name = "Bozhidar"
</code></pre>

    <p>The string literals in this guide are aligned with the first style.</p>
  </li>
  <li>
    <p><a name="curlies-interpolate"></a>
Don’t leave out <code class="highlighter-rouge"><span class="p">{}</span></code> around instance and global variables being interpolated
into a string.
<sup>[<a href="#curlies-interpolate">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Person
  attr_reader :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end

  # bad - valid, but awkward
  def to_s
    "#@first_name #@last_name"
  end

  # good
  def to_s
    "#{@first_name} #{@last_name}"
  end
end

$global = 0
# bad
puts "$global = #$global"

# good
puts "$global = #{$global}"
</code></pre>
  </li>
  <li>
    <p><a name="no-to-s"></a>
Don’t use <code class="highlighter-rouge">Object#to_s</code> on interpolated objects. It’s invoked on them
automatically.
<sup>[<a href="#no-to-s">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
message = "This is the #{result.to_s}."

# good
message = "This is the #{result}."
</code></pre>
  </li>
  <li>
    <p><a name="concat-strings"></a>
Avoid using <code class="highlighter-rouge">String#+</code> when you need to construct large data chunks.
Instead, use <code class="highlighter-rouge">String#&lt;&lt;</code>. Concatenation mutates the string instance in-place
and is always faster than <code class="highlighter-rouge">String#+</code>, which creates a bunch of new string
objects.
<sup>[<a href="#concat-strings">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
html = ''
html += '&lt;h1&gt;Page title&lt;/h1&gt;'

paragraphs.each do |paragraph|
  html += "&lt;p&gt;#{paragraph}&lt;/p&gt;"
end

# good and also fast
html = ''
html &lt;&lt; '&lt;h1&gt;Page title&lt;/h1&gt;'

paragraphs.each do |paragraph|
  html &lt;&lt; "&lt;p&gt;#{paragraph}&lt;/p&gt;"
end
</code></pre>
  </li>
  <li>
    <p><a name="dont-abuse-gsub"></a>
Don’t use <code class="highlighter-rouge">String#gsub</code> in scenarios in which you can use a faster more specialized alternative.
<sup>[<a href="#dont-abuse-gsub">link</a>]</sup></p>

    <pre><code class="language-Ruby">url = 'http://example.com'
str = 'lisp-case-rules'

# bad
url.gsub('http://', 'https://')
str.gsub('-', '_')

# good
url.sub('http://', 'https://')
str.tr('-', '_')
</code></pre>
  </li>
</ul>

<h3 id="date--time">Date &amp; Time</h3>

<ul>
  <li>
    <p><a name="time-now"></a>
Prefer <code class="highlighter-rouge">Time.now</code> over <code class="highlighter-rouge">Time.new</code> when retrieving the current system time.
<sup>[<a href="#time-now">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="no-datetime"></a>
Don’t use <code class="highlighter-rouge">DateTime</code> unless you need to account for historical calendar
reform – and if you do, explicitly specify the <code class="highlighter-rouge">start</code> argument to
clearly state your intentions.
<sup>[<a href="#no-datetime">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - uses DateTime for current time
DateTime.now
  
# good - uses Time for current time
Time.now
  
# bad - uses DateTime for modern date
DateTime.iso8601('2016-06-29')
  
# good - uses Date for modern date
Date.iso8601('2016-06-29')
  
# good - uses DateTime with start argument for historical date
DateTime.iso8601('1751-04-23', Date::ENGLAND)
</code></pre>
  </li>
</ul>

<h3 id="regular-expressions">Regular Expressions</h3>

<ul>
  <li>
    <p><a name="no-regexp-for-plaintext"></a>
Don’t use regular expressions if you just need plain text search in string:
<code class="highlighter-rouge">string['text']</code>
<sup>[<a href="#no-regexp-for-plaintext">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="regexp-string-index"></a>
For simple constructions you can use regexp directly through string index.
<sup>[<a href="#regexp-string-index">link</a>]</sup></p>

    <pre><code class="language-Ruby">match = string[/regexp/]             # get content of matched regexp
first_group = string[/text(grp)/, 1] # get content of captured group
string[/text (grp)/, 1] = 'replace'  # string =&gt; 'text replace'
</code></pre>
  </li>
  <li>
    <p><a name="non-capturing-regexp"></a>
Use non-capturing groups when you don’t use the captured result.
<sup>[<a href="#non-capturing-regexp">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
/(first|second)/

# good
/(?:first|second)/
</code></pre>
  </li>
  <li>
    <p><a name="no-perl-regexp-last-matchers"></a>
Don’t use the cryptic Perl-legacy variables denoting last regexp group
matches (<code class="highlighter-rouge">$1</code>, <code class="highlighter-rouge">$2</code>, etc). Use <code class="highlighter-rouge">Regexp.last_match(n)</code> instead.
<sup>[<a href="#no-perl-regexp-last-matchers">link</a>]</sup></p>

    <pre><code class="language-Ruby">/(regexp)/ =~ string
...

# bad
process $1

# good
process Regexp.last_match(1)
</code></pre>
  </li>
  <li>
    <p><a name="no-numbered-regexes"></a>
Avoid using numbered groups as it can be hard to track what they contain.
Named groups can be used instead.
<sup>[<a href="#no-numbered-regexes">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
/(regexp)/ =~ string
# some code
process Regexp.last_match(1)

# good
/(?&lt;meaningful_var&gt;regexp)/ =~ string
# some code
process meaningful_var
</code></pre>
  </li>
  <li>
    <p><a name="limit-escapes"></a>
Character classes have only a few special characters you should care about:
<code class="highlighter-rouge">^</code>, <code class="highlighter-rouge">-</code>, <code class="highlighter-rouge">\</code>, <code class="highlighter-rouge">]</code>, so don’t escape <code class="highlighter-rouge">.</code> or brackets in <code class="highlighter-rouge">[]</code>.
<sup>[<a href="#limit-escapes">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="caret-and-dollar-regexp"></a>
Be careful with <code class="highlighter-rouge">^</code> and <code class="highlighter-rouge">$</code> as they match start/end of line, not string
endings.  If you want to match the whole string use: <code class="highlighter-rouge">\A</code> and <code class="highlighter-rouge">\z</code> (not to be
confused with <code class="highlighter-rouge">\Z</code> which is the equivalent of <code class="highlighter-rouge">/\n?\z/</code>).
<sup>[<a href="#caret-and-dollar-regexp">link</a>]</sup></p>

    <pre><code class="language-Ruby">string = "some injection\nusername"
string[/^username$/]   # matches
string[/\Ausername\z/] # doesn't match
</code></pre>
  </li>
  <li>
    <p><a name="comment-regexes"></a>
Use <code class="highlighter-rouge">x</code> modifier for complex regexps. This makes them more readable and you
can add some useful comments. Just be careful as spaces are ignored.
<sup>[<a href="#comment-regexes">link</a>]</sup></p>

    <pre><code class="language-Ruby">regexp = /
  start         # some text
  \s            # white space char
  (group)       # first group
  (?:alt1|alt2) # some alternation
  end
/x
</code></pre>
  </li>
  <li>
    <p><a name="gsub-blocks"></a>
For complex replacements <code class="highlighter-rouge">sub</code>/<code class="highlighter-rouge">gsub</code> can be used with a block or a hash.
<sup>[<a href="#gsub-blocks">link</a>]</sup></p>

    <pre><code class="language-Ruby">words = 'foo bar'
words.sub(/f/, 'f' =&gt; 'F') # =&gt; 'Foo bar'
words.gsub(/\w+/) { |word| word.capitalize } # =&gt; 'Foo Bar'
</code></pre>
  </li>
</ul>

<h3 id="percent-literals">Percent Literals</h3>

<ul>
  <li>
    <p><a name="percent-q-shorthand"></a>
Use <code class="highlighter-rouge">%()</code>(it’s a shorthand for <code class="highlighter-rouge">%Q</code>) for single-line strings which require
both interpolation and embedded double-quotes. For multi-line strings, prefer
heredocs.
<sup>[<a href="#percent-q-shorthand">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad (no interpolation needed)
%(&lt;div class="text"&gt;Some text&lt;/div&gt;)
# should be '&lt;div class="text"&gt;Some text&lt;/div&gt;'

# bad (no double-quotes)
%(This is #{quality} style)
# should be "This is #{quality} style"

# bad (multiple lines)
%(&lt;div&gt;\n&lt;span class="big"&gt;#{exclamation}&lt;/span&gt;\n&lt;/div&gt;)
# should be a heredoc.

# good (requires interpolation, has quotes, single line)
%(&lt;tr&gt;&lt;td class="name"&gt;#{name}&lt;/td&gt;)
</code></pre>
  </li>
  <li>
    <p><a name="percent-q"></a>
Avoid <code class="highlighter-rouge">%q</code> unless you have a string with both <code class="highlighter-rouge">'</code> and <code class="highlighter-rouge">"</code> in it. Regular
string literals are more readable and should be preferred unless a lot of
characters would have to be escaped in them.
<sup>[<a href="#percent-q">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
name = %q(Bruce Wayne)
time = %q(8 o'clock)
question = %q("What did you say?")

# good
name = 'Bruce Wayne'
time = "8 o'clock"
question = '"What did you say?"'
quote = %q(&lt;p class='quote'&gt;"What did you say?"&lt;/p&gt;)
</code></pre>
  </li>
  <li>
    <p><a name="percent-r"></a>
Use <code class="highlighter-rouge">%r</code> only for regular expressions matching <em>at least</em> one ‘/’
character.
<sup>[<a href="#percent-r">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
%r{\s+}

# good
%r{^/(.*)$}
%r{^/blog/2011/(.*)$}
</code></pre>
  </li>
  <li>
    <p><a name="percent-x"></a>
Avoid the use of <code class="highlighter-rouge">%x</code> unless you’re going to invoke a command with
backquotes in it(which is rather unlikely).
<sup>[<a href="#percent-x">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
date = %x(date)

# good
date = `date`
echo = %x(echo `date`)
</code></pre>
  </li>
  <li>
    <p><a name="percent-s"></a>
Avoid the use of <code class="highlighter-rouge">%s</code>. It seems that the community has decided <code class="highlighter-rouge">:"some
string"</code> is the preferred way to create a symbol with spaces in it.
<sup>[<a href="#percent-s">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="percent-literal-braces"></a>
Prefer <code class="highlighter-rouge">()</code> as delimiters for all <code class="highlighter-rouge">%</code> literals, except <code class="highlighter-rouge">%r</code>. Since parentheses
often appear inside regular expressions in many scenarios a less common
character like <code class="highlighter-rouge"><span class="p">{</span></code> might be a better choice for a delimiter, depending on the
regexp’s content.
<sup>[<a href="#percent-literal-braces">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
%w[one two three]
%q{"Test's king!", John said.}

# good
%w(one two three)
%q("Test's king!", John said.)
</code></pre>
  </li>
</ul>

<h3 id="metaprogramming">Metaprogramming</h3>

<ul>
  <li>
    <p><a name="no-needless-metaprogramming"></a>
Avoid needless metaprogramming.
<sup>[<a href="#no-needless-metaprogramming">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="no-monkey-patching"></a>
Do not mess around in core classes when writing libraries.  (Do not
monkey-patch them.)
<sup>[<a href="#no-monkey-patching">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="block-class-eval"></a>
The block form of <code class="highlighter-rouge">class_eval</code> is preferable to the string-interpolated
form.
<sup>[<a href="#block-class-eval">link</a>]</sup></p>

    <ul>
      <li>
        <p>when you use the string-interpolated form, always supply <code class="highlighter-rouge">__FILE__</code>
and <code class="highlighter-rouge">__LINE__</code>, so that your backtraces make sense:</p>

        <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">class_eval</span> <span class="s1">'def use_relative_model_naming?; true; end'</span><span class="p">,</span> <span class="kp">__FILE__</span><span class="p">,</span> <span class="kp">__LINE__</span>
</code></pre>
        </div>
      </li>
      <li>
        <p><code class="highlighter-rouge">define_method</code> is preferable to <code class="highlighter-rouge">class_eval{ def ... }</code></p>
      </li>
    </ul>
  </li>
  <li>
    <p><a name="eval-comment-docs"></a>
When using <code class="highlighter-rouge">class_eval</code> (or other <code class="highlighter-rouge">eval</code>) with string interpolation, add a
comment block showing its appearance if interpolated (a practice used in Rails
code):
<sup>[<a href="#eval-comment-docs">link</a>]</sup></p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># from activesupport/lib/active_support/core_ext/string/output_safety.rb</span>
<span class="no">UNSAFE_STRING_METHODS</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">unsafe_method</span><span class="o">|</span>
  <span class="k">if</span> <span class="s1">'String'</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="n">unsafe_method</span><span class="p">)</span>
    <span class="nb">class_eval</span> <span class="o">&lt;&lt;-</span><span class="no">EOT</span><span class="p">,</span> <span class="kp">__FILE__</span><span class="p">,</span> <span class="kp">__LINE__</span> <span class="o">+</span> <span class="mi">1</span><span class="sh">
      def </span><span class="si">#{</span><span class="n">unsafe_method</span><span class="si">}</span><span class="sh">(*params, &amp;block)       # def capitalize(*params, &amp;block)
        to_str.</span><span class="si">#{</span><span class="n">unsafe_method</span><span class="si">}</span><span class="sh">(*params, &amp;block)  #   to_str.capitalize(*params, &amp;block)
      end                                       # end

      def </span><span class="si">#{</span><span class="n">unsafe_method</span><span class="si">}</span><span class="sh">!(*params)              # def capitalize!(*params)
        @dirty = true                           #   @dirty = true
        super                                   #   super
      end                                       # end
</span><span class="no">    EOT</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
    </div>
  </li>
  <li>
    <p><a name="no-method-missing"></a>
Avoid using <code class="highlighter-rouge">method_missing</code> for metaprogramming because backtraces become
messy, the behavior is not listed in <code class="highlighter-rouge">#methods</code>, and misspelled method calls
might silently work, e.g. <code class="highlighter-rouge">nukes.launch_state = false</code>. Consider using
delegation, proxy, or <code class="highlighter-rouge">define_method</code> instead. If you must use
<code class="highlighter-rouge">method_missing</code>:
<sup>[<a href="#no-method-missing">link</a>]</sup></p>

    <ul>
      <li>Be sure to <a href="http://blog.marc-andre.ca/2010/11/methodmissing-politely.html">also define <code class="highlighter-rouge">respond_to_missing?</code></a></li>
      <li>Only catch methods with a well-defined prefix, such as <code class="highlighter-rouge">find_by_*</code> – make your code as assertive as possible.</li>
      <li>Call <code class="highlighter-rouge">super</code> at the end of your statement</li>
      <li>
        <p>Delegate to assertive, non-magical methods:</p>

        <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">method_missing?</span><span class="p">(</span><span class="n">meth</span><span class="p">,</span> <span class="o">*</span><span class="n">params</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="k">if</span> <span class="sr">/^find_by_(?&lt;prop&gt;.*)/</span> <span class="o">=~</span> <span class="n">meth</span>
    <span class="c1"># ... lots of code to do a find_by</span>
  <span class="k">else</span>
    <span class="k">super</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">method_missing?</span><span class="p">(</span><span class="n">meth</span><span class="p">,</span> <span class="o">*</span><span class="n">params</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="k">if</span> <span class="sr">/^find_by_(?&lt;prop&gt;.*)/</span> <span class="o">=~</span> <span class="n">meth</span>
    <span class="n">find_by</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="o">*</span><span class="n">params</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="k">super</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># best of all, though, would to define_method as each findable attribute is declared</span>
</code></pre>
        </div>
      </li>
    </ul>
  </li>
  <li>
    <p><a name="prefer-public-send"></a>
Prefer <code class="highlighter-rouge">public_send</code> over <code class="highlighter-rouge">send</code> so as not to circumvent <code class="highlighter-rouge">private</code>/<code class="highlighter-rouge">protected</code> visibility.
<sup>[<a href="#prefer-public-send">link</a>]</sup></p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># We have  an ActiveModel Organization that includes concern Activatable</span>
<span class="k">module</span> <span class="nn">Activatable</span>
  <span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Concern</span>

  <span class="n">included</span> <span class="k">do</span>
    <span class="n">before_create</span> <span class="ss">:create_token</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">reset_token</span>
    <span class="c1"># some code</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create_token</span>
    <span class="c1"># some code</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">activate!</span>
    <span class="c1"># some code</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Organization</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">Activatable</span>
<span class="k">end</span>

<span class="n">linux_organization</span> <span class="o">=</span> <span class="no">Organization</span><span class="p">.</span><span class="nf">find</span><span class="p">(.</span><span class="nf">.</span><span class="o">.</span><span class="p">)</span>
<span class="c1"># BAD - violates privacy</span>
<span class="n">linux_organization</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="ss">:reset_token</span><span class="p">)</span>
<span class="c1"># GOOD - should throw an exception</span>
<span class="n">linux_organization</span><span class="p">.</span><span class="nf">public_send</span><span class="p">(</span><span class="ss">:reset_token</span><span class="p">)</span>
</code></pre>
    </div>
  </li>
  <li>
    <p><a name="prefer-__send__"></a>
Prefer <code class="highlighter-rouge">__send__</code> over <code class="highlighter-rouge">send</code>, as <code class="highlighter-rouge">send</code> may overlap with existing methods.
<sup>[<a href="#prefer-__send__">link</a>]</sup></p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'socket'</span>

<span class="n">u1</span> <span class="o">=</span> <span class="no">UDPSocket</span><span class="p">.</span><span class="nf">new</span>
<span class="n">u1</span><span class="p">.</span><span class="nf">bind</span><span class="p">(</span><span class="s1">'127.0.0.1'</span><span class="p">,</span> <span class="mi">4913</span><span class="p">)</span>
<span class="n">u2</span> <span class="o">=</span> <span class="no">UDPSocket</span><span class="p">.</span><span class="nf">new</span>
<span class="n">u2</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="s1">'127.0.0.1'</span><span class="p">,</span> <span class="mi">4913</span><span class="p">)</span>
<span class="c1"># Won't send a message to the receiver obj.</span>
<span class="c1"># Instead it will send a message via UDP socket.</span>
<span class="n">u2</span><span class="p">.</span><span class="nf">send</span> <span class="ss">:sleep</span><span class="p">,</span> <span class="mi">0</span>
<span class="c1"># Will actually send a message to the receiver obj.</span>
<span class="n">u2</span><span class="p">.</span><span class="nf">__send__</span> <span class="p">.</span><span class="nf">.</span><span class="o">.</span>
</code></pre>
    </div>
  </li>
</ul>

<h2 id="rails">Rails</h2>

<h3 id="routing">Routing</h3>

<ul>
  <li>
    <p><a name="member-collection-routes"></a>
When you need to add more actions to a RESTful resource (do you really need
them at all?) use <code class="highlighter-rouge">member</code> and <code class="highlighter-rouge">collection</code> routes.
<sup>[<a href="#member-collection-routes">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
get 'subscriptions/:id/unsubscribe'
resources :subscriptions

# good
resources :subscriptions do
  get 'unsubscribe', on: :member
end

# bad
get 'photos/search'
resources :photos

# good
resources :photos do
  get 'search', on: :collection
end
</code></pre>
  </li>
  <li>
    <p><a name="many-member-collection-routes"></a>
If you need to define multiple <code class="highlighter-rouge">member/collection</code> routes use the
alternative block syntax.
<sup>[<a href="#many-member-collection-routes">link</a>]</sup></p>

    <pre><code class="language-Ruby">resources :subscriptions do
  member do
    get 'unsubscribe'
    # more routes
  end
end

resources :photos do
  collection do
    get 'search'
    # more routes
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="nested-routes"></a>
Use nested routes to express better the relationship between ActiveRecord
models.
<sup>[<a href="#nested-routes">link</a>]</sup></p>

    <pre><code class="language-Ruby">class Post &lt; ActiveRecord::Base
  has_many :comments
end

class Comments &lt; ActiveRecord::Base
  belongs_to :post
end

# routes.rb
resources :posts do
  resources :comments
end
</code></pre>
  </li>
  <li>
    <p><a name="namespaced-routes"></a>
If you need to nest routes more than 1 level deep then use the <code class="highlighter-rouge">shallow: true</code> option. This will save user from long urls <code class="highlighter-rouge">posts/1/comments/5/versions/7/edit</code> and you from long url helpers <code class="highlighter-rouge">edit_post_comment_version</code>.</p>

    <pre><code class="language-Ruby">resources :posts, shallow: true do
  resources :comments do
    resources :versions
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="namespaced-routes"></a>
Use namespaced routes to group related actions.
<sup>[<a href="#namespaced-routes">link</a>]</sup></p>

    <pre><code class="language-Ruby">namespace :admin do
  # Directs /admin/products/* to Admin::ProductsController
  # (app/controllers/admin/products_controller.rb)
  resources :products
end
</code></pre>
  </li>
</ul>

<h3 id="controllers">Controllers</h3>

<ul>
  <li>
    <p><a name="skinny-controllers"></a>
Keep the controllers skinny - they should only retrieve data for the view
layer and shouldn’t contain any business logic (all the business logic
should naturally reside in the model).
<sup>[<a href="#skinny-controllers">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="one-method"></a>
Each controller action should (ideally) invoke only one method other than an
initial find or new.
<sup>[<a href="#one-method">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="shared-instance-variables"></a>
Share no more than two instance variables between a controller and a view.
<sup>[<a href="#shared-instance-variables">link</a>]</sup></p>
  </li>
</ul>

<h3 id="models">Models</h3>

<ul>
  <li>
    <p><a name="model-classes"></a>
Introduce non-ActiveRecord model classes freely.
<sup>[<a href="#model-classes">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="meaningful-model-names"></a>
Name the models with meaningful (but short) names without abbreviations.
<sup>[<a href="#meaningful-model-names">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="model-business-logic"></a>
Unless they have some meaning in the business domain, don’t put methods in
your model that just format your data (like code generating HTML). These
methods are most likely going to be called from the view layer only, so their
place is in helpers. Keep your models for business logic and data-persistence
only.
<sup>[<a href="#model-business-logic">link</a>]</sup></p>
  </li>
</ul>

<h4 id="activerecord">ActiveRecord</h4>

<ul>
  <li>
    <p><a name="macro-style-methods"></a>
Group macro-style methods (<code class="highlighter-rouge">has_many</code>, <code class="highlighter-rouge">validates</code>, etc) in the beginning of
the class definition.
<sup>[<a href="#macro-style-methods">link</a>]</sup></p>

    <pre><code class="language-Ruby">class User &lt; ActiveRecord::Base
  # keep the default scope first (if any)
  default_scope { where(active: true) }

  # constants come up next
  COLORS = %w(red green blue)

  # afterwards we put attr related macros
  attr_accessor :formatted_date_of_birth

  attr_accessible :login, :first_name, :last_name, :email, :password

  # Rails4+ enums after attr macros, prefer the hash syntax
  enum gender: { female: 0, male: 1 }

  # followed by association macros
  belongs_to :country

  has_many :authentications, dependent: :destroy

  # and validation macros
  validates :email, presence: true
  validates :username, presence: true
  validates :username, uniqueness: { case_sensitive: false }
  validates :username, format: { with: /\A[A-Za-z][A-Za-z0-9._-]{2,19}\z/ }
  validates :password, format: { with: /\A\S{8,128}\z/, allow_nil: true }

  # next we have callbacks
  before_save :cook
  before_save :update_username_lower

  # other macros (like devise's) should be placed after the callbacks

  ...
end
</code></pre>
  </li>
  <li>
    <p><a name="has-many-through"></a>
Prefer <code class="highlighter-rouge">has_many :through</code> to <code class="highlighter-rouge">has_and_belongs_to_many</code>. Using <code class="highlighter-rouge">has_many
:through</code> allows additional attributes and validations on the join model.
<sup>[<a href="#has-many-through">link</a>]</sup></p>

    <pre><code class="language-Ruby"># not so good - using has_and_belongs_to_many
class User &lt; ActiveRecord::Base
  has_and_belongs_to_many :groups
end

class Group &lt; ActiveRecord::Base
  has_and_belongs_to_many :users
end

# preferred way - using has_many :through
class User &lt; ActiveRecord::Base
  has_many :memberships
  has_many :groups, through: :memberships
end

class Membership &lt; ActiveRecord::Base
  belongs_to :user
  belongs_to :group
end

class Group &lt; ActiveRecord::Base
  has_many :memberships
  has_many :users, through: :memberships
end
</code></pre>
  </li>
  <li>
    <p><a name="sexy-validations"></a>
Use new(ish) style validation syntaxt.
<sup>[<a href="#sexy-validations">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
validates_presence_of :email
validates_length_of :email, maximum: 100

# good
validates :email, presence: true, length: { maximum: 100 }
</code></pre>
  </li>
  <li>
    <p><a name="named-scopes"></a>
Use named scopes freely.
<sup>[<a href="#named-scopes">link</a>]</sup></p>

    <pre><code class="language-Ruby">class User &lt; ActiveRecord::Base
  scope :active, -&gt; { where(active: true) }
  scope :inactive, -&gt; { where(active: false) }

  scope :with_orders, -&gt; { joins(:orders).select('distinct(users.id)') }
end
</code></pre>
  </li>
  <li>
    <p><a name="named-scope-class"></a>
When a named scope defined with a lambda and parameters becomes too
complicated, it is preferable to make a class method instead which serves the
same purpose of the named scope and returns an <code class="highlighter-rouge">ActiveRecord::Relation</code>
object. Arguably you can define even simpler scopes like this.
<sup>[<a href="#named-scope-class">link</a>]</sup></p>

    <pre><code class="language-Ruby">class User &lt; ActiveRecord::Base
  def self.with_orders
    joins(:orders).select('distinct(users.id)')
  end
end
</code></pre>
  </li>
  <li>
    <p><a name="find-each"></a>
Use <code class="highlighter-rouge">find_each</code> to iterate over a collection of AR objects. Looping through a
collection of records from the database (using the <code class="highlighter-rouge">all</code> method, for example)
is very inefficient since it will try to instantiate all the objects at once.
In that case, batch processing methods allow you to work with the records in
batches, thereby greatly reducing memory consumption.
<sup>[<a href="#find-each">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
Person.all.each do |person|
  person.do_awesome_stuff
end

Person.where('age &gt; 21').each do |person|
  person.party_all_night!
end

# good
Person.find_each do |person|
  person.do_awesome_stuff
end

Person.where('age &gt; 21').find_each do |person|
  person.party_all_night!
end
</code></pre>
  </li>
  <li>
    <p><a name="has_many-has_one-dependent-option"></a>
Define the <code class="highlighter-rouge">dependent</code> option to the <code class="highlighter-rouge">has_many</code> and <code class="highlighter-rouge">has_one</code> associations.
<sup>[<a href="#has_many-has_one-dependent-option">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
class Post &lt; ActiveRecord::Base
  has_many :comments
end

# good
class Post &lt; ActiveRecord::Base
  has_many :comments, dependent: :destroy
end
</code></pre>
  </li>
</ul>

<h4 id="activerecord-queries">ActiveRecord Queries</h4>

<ul>
  <li>
    <p><a name="avoid-interpolation"></a>
Avoid string interpolation in
queries, as it will make your code susceptible to SQL injection
attacks.
<sup>[<a href="#avoid-interpolation">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad - param will be interpolated unescaped
Client.where("orders_count = #{params[:orders]}")

# good - param will be properly escaped
Client.where('orders_count = ?', params[:orders])
</code></pre>
  </li>
  <li>
    <p><a name="find"></a>
Favor the use of <code class="highlighter-rouge">find</code> over <code class="highlighter-rouge">where</code>
when you need to retrieve a single record by id.
<sup>[<a href="#find">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
User.where(id: id).take

# good
User.find(id)
</code></pre>
  </li>
  <li>
    <p><a name="find_by"></a>
Favor the use of <code class="highlighter-rouge">find_by</code> over <code class="highlighter-rouge">where</code> and <code class="highlighter-rouge">find_by_attribute</code>
when you need to retrieve a single record by some attributes.
<sup>[<a href="#find_by">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
User.where(first_name: 'Bruce', last_name: 'Wayne').first

# bad
User.find_by_first_name_and_last_name('Bruce', 'Wayne')

# good
User.find_by(first_name: 'Bruce', last_name: 'Wayne')
</code></pre>
  </li>
  <li>
    <p><a name="find_by_id"></a>
Remember that find_by_id will not raise ActiveRecord::RecordNotFound error
<sup>[<a href="#find_by_id">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="where-not"></a>
Favor the use of <code class="highlighter-rouge">where.not</code> over SQL.
<sup>[<a href="#where-not">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
User.where("id != ?", id)

# good
User.where.not(id: id)
</code></pre>
  </li>
</ul>

<h3 id="migrations">Migrations</h3>

<ul>
  <li>
    <p><a name="schema-version"></a>
Keep the <code class="highlighter-rouge">schema.rb</code> (or <code class="highlighter-rouge">structure.sql</code>) under version control.
<sup>[<a href="#schema-version">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="db-schema-load"></a>
Use <code class="highlighter-rouge">rake db:schema:load</code> instead of <code class="highlighter-rouge">rake db:migrate</code> to initialize an empty
database.
<sup>[<a href="#db-schema-load">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="default-migration-values"></a>
Enforce default values in the migrations themselves instead of in the
application layer.
<sup>[<a href="#default-migration-values">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="foreign-key-constraints"></a>
Enforce foreign-key constraints. As of Rails 4.2, ActiveRecord
supports foreign key constraints natively.
<sup>[<a href="#foreign-key-constraints">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="change-vs-up-down"></a>
When writing constructive migrations (adding tables or columns),
use the <code class="highlighter-rouge">change</code> method instead of <code class="highlighter-rouge">up</code> and <code class="highlighter-rouge">down</code> methods.
<sup>[<a href="#change-vs-up-down">link</a>]</sup></p>

    <pre><code class="language-Ruby"># the old way
class AddNameToPeople &lt; ActiveRecord::Migration
  def up
    add_column :people, :name, :string
  end

  def down
    remove_column :people, :name
  end
end

# the new preferred way
class AddNameToPeople &lt; ActiveRecord::Migration
  def change
    add_column :people, :name, :string
  end
end
</code></pre>
  </li>
</ul>

<h3 id="views">Views</h3>

<ul>
  <li>
    <p><a name="no-direct-model-view"></a>
Never call the model layer directly from a view.
<sup>[<a href="#no-direct-model-view">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="no-complex-view-formatting"></a>
Never make complex formatting in the views, export the formatting to a method
in the view helper or the model.
<sup>[<a href="#no-complex-view-formatting">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="partials"></a>
Mitigate code duplication by using partial templates and layouts.
<sup>[<a href="#partials">link</a>]</sup></p>
  </li>
</ul>

<h3 id="assets">Assets</h3>

<p>Use the <a href="http://guides.rubyonrails.org/asset_pipeline.html">assets pipeline</a> to leverage organization within
your application.</p>

<ul>
  <li>
    <p><a name="reserve-app-assets"></a>
Reserve <code class="highlighter-rouge">app/assets</code> for custom stylesheets, javascripts, or images.
<sup>[<a href="#reserve-app-assets">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="gem-assets"></a>
When possible, use gemified versions of assets (e.g.
<a href="https://github.com/rails/jquery-rails">jquery-rails</a>,
<a href="https://github.com/joliss/jquery-ui-rails">jquery-ui-rails</a>,
<a href="https://github.com/thomas-mcdonald/bootstrap-sass">bootstrap-sass</a>,
<a href="https://github.com/zurb/foundation">zurb-foundation</a>).
<sup>[<a href="#gem-assets">link</a>]</sup></p>
  </li>
</ul>

<h3 id="mailers">Mailers</h3>

<ul>
  <li>
    <p><a name="mailer-name"></a>
Name the mailers <code class="highlighter-rouge">SomethingMailer</code>. Without the Mailer suffix it isn’t
immediately apparent what’s a mailer and which views are related to the
mailer.
<sup>[<a href="#mailer-name">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="html-plain-email"></a>
Provide both HTML and plain-text view templates.
<sup>[<a href="#html-plain-email">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="enable-delivery-errors"></a>
Enable errors raised on failed mail delivery in your development environment.
The errors are disabled by default.
<sup>[<a href="#enable-delivery-errors">link</a>]</sup></p>

    <pre><code class="language-Ruby"># config/environments/development.rb

config.action_mailer.raise_delivery_errors = true
</code></pre>
  </li>
  <li>
    <p><a name="local-smtp"></a>
Use a mail preview gem like
<a href="https://github.com/ryanb/letter_opener">LetterOpener</a> in the development
environment.
<sup>[<a href="#local-smtp">link</a>]</sup></p>

    <pre><code class="language-Ruby"># config/environments/development.rb

config.action_mailer.delivery_method = :letter_opener
</code></pre>
  </li>
  <li>
    <p><a name="default-hostname"></a>
Provide default settings for the host name.
<sup>[<a href="#default-hostname">link</a>]</sup></p>

    <pre><code class="language-Ruby"># config/environments/development.rb
config.action_mailer.default_url_options = { host: "#{local_ip}:3000" }

# config/environments/production.rb
config.action_mailer.default_url_options = { host: 'your_site.com' }

# in your mailer class
default_url_options[:host] = 'your_site.com'
</code></pre>
  </li>
  <li>
    <p><a name="url-not-path-in-email"></a>
If you need to use a link to your site in an email, always use the <code class="highlighter-rouge">_url</code>, not
<code class="highlighter-rouge">_path</code> methods. The <code class="highlighter-rouge">_url</code> methods include the host name and the <code class="highlighter-rouge">_path</code>
methods don’t.
<sup>[<a href="#url-not-path-in-email">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
You can always find more info about this course
&lt;%= link_to 'here', course_path(@course) %&gt;

# good
You can always find more info about this course
&lt;%= link_to 'here', course_url(@course) %&gt;
</code></pre>
  </li>
  <li>
    <p><a name="email-addresses"></a>
Format the from and to addresses properly. Use the following format:
<sup>[<a href="#email-addresses">link</a>]</sup></p>

    <pre><code class="language-Ruby"># in your mailer class
default from: 'Your Name &lt;info@your_site.com&gt;'
</code></pre>
  </li>
  <li>
    <p><a name="inline-email-styles"></a>
When sending html emails all styles should be inline, as some mail clients
have problems with external styles.
<sup>[<a href="#inline-email-styles">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="background-email"></a>
Try to send all the emails asyncronously to avoid slowing down the server response.
<sup>[<a href="#background-email">link</a>]</sup></p>
  </li>
</ul>

<h3 id="time">Time</h3>

<ul>
  <li>
    <p><a name="tz-config"></a>
Config your timezone accordingly in <code class="highlighter-rouge">application.rb</code>.
<sup>[<a href="#tz-config">link</a>]</sup></p>

    <pre><code class="language-Ruby">config.time_zone = 'Eastern European Time'
# optional - note it can be only :utc or :local (default is :utc)
config.active_record.default_timezone = :local
</code></pre>
  </li>
  <li>
    <p><a name="time-parse"></a>
Don’t use <code class="highlighter-rouge">Time.parse</code>.
<sup>[<a href="#time-parse">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
Time.parse('2015-03-02 19:05:37') # =&gt; Will assume time string given is in the system's time zone.

# good
Time.zone.parse('2015-03-02 19:05:37') # =&gt; Mon, 02 Mar 2015 19:05:37 EET +02:00
</code></pre>
  </li>
  <li>
    <p><a name="time-now"></a>
Don’t use <code class="highlighter-rouge">Time.now</code>.
<sup>[<a href="#time-now">link</a>]</sup></p>

    <pre><code class="language-Ruby"># bad
Time.now # =&gt; Returns system time and ignores your configured time zone.

# good
Time.zone.now # =&gt; Fri, 12 Mar 2014 22:04:47 EET +02:00
Time.current # Same thing but shorter.
</code></pre>
  </li>
</ul>

<h3 id="bundler">Bundler</h3>

<ul>
  <li>
    <p><a name="dev-test-gems"></a>
Put gems used only for development or testing in the appropriate group in the
Gemfile.
<sup>[<a href="#dev-test-gems">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="only-good-gems"></a>
Use only established gems in your projects. If you’re contemplating on
including some little-known gem you should do a careful review of its source
code first.
<sup>[<a href="#only-good-gems">link</a>]</sup></p>
  </li>
  <li>
    <p><a name="gemfile-lock"></a>
Do not remove the <code class="highlighter-rouge">Gemfile.lock</code> from version control. This is not some
randomly generated file - it makes sure that all of your team members get the
same gem versions when they do a <code class="highlighter-rouge">bundle install</code>.
<sup>[<a href="#gemfile-lock">link</a>]</sup></p>
  </li>
</ul>

<h3 id="managing-processes">Managing processes</h3>

<ul>
  <li><a name="foreman"></a>
Use
<a href="https://github.com/ddollar/foreman">foreman</a> to easily manage running an application in development environment.
<sup>[<a href="#foreman">link</a>]</sup></li>
</ul>

  </div>

</article>

      </div>
    </div>


  </body>

</html>
